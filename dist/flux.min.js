(()=>{var _e=class extends Event{oldState;newState;constructor(e,{oldState:t="",newState:i="",...s}={}){super(e,s),this.oldState=String(t||""),this.newState=String(i||"")}},Cs=new WeakMap;function Ls(e,t,i){Cs.set(e,setTimeout(()=>{Cs.has(e)&&e.dispatchEvent(new _e("toggle",{cancelable:!1,oldState:t,newState:i}))},0))}var di=globalThis.ShadowRoot||function(){},zr=globalThis.HTMLDialogElement||function(){},ye=new WeakMap,gt=new WeakMap,Kt=new WeakMap;function we(e){return Kt.get(e)||"hidden"}var xe=new WeakMap;function Gr(e){let t=e.popoverTargetElement;if(!(t instanceof HTMLElement))return;let i=we(t);e.popoverTargetAction==="show"&&i==="showing"||e.popoverTargetAction==="hide"&&i==="hidden"||(i==="showing"?Xt(t,!0,!0):Dt(t,!1)&&(xe.set(t,e),hi(t)))}function Dt(e,t){return!(e.popover!=="auto"&&e.popover!=="manual"||!e.isConnected||t&&we(e)!=="showing"||!t&&we(e)!=="hidden"||e instanceof zr&&e.hasAttribute("open")||document.fullscreenElement===e)}function Ds(e){return e?Array.from(gt.get(e.ownerDocument)||[]).indexOf(e)+1:0}function jr(e){let t=Os(e),i=Xr(e);return Ds(t)>Ds(i)?t:i}function Ae(e){let t=gt.get(e);for(let i of t||[])if(!i.isConnected)t.delete(i);else return i;return null}function Rt(e){return typeof e.getRootNode=="function"?e.getRootNode():e.parentNode?Rt(e.parentNode):e}function Os(e){for(;e;){if(e instanceof HTMLElement&&e.popover==="auto"&&Kt.get(e)==="showing")return e;if(e=e instanceof Element&&e.assignedSlot||e.parentElement||Rt(e),e instanceof di&&(e=e.host),e instanceof Document)return}}function Xr(e){for(;e;){let t=e.popoverTargetElement;if(t instanceof HTMLElement)return t;if(e=e.parentElement||Rt(e),e instanceof di&&(e=e.host),e instanceof Document)return}}function Kr(e){let t=new Map,i=0;for(let a of gt.get(e.ownerDocument)||[])t.set(a,i),i+=1;t.set(e,i),i+=1;let s=null;function r(a){let n=Os(a);if(n===null)return null;let l=t.get(n);(s===null||t.get(s)<l)&&(s=n)}return r(e.parentElement||Rt(e)),s}function Jr(e){return e.hidden||e instanceof di||(e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement||e instanceof HTMLOptGroupElement||e instanceof HTMLOptionElement||e instanceof HTMLFieldSetElement)&&e.disabled||e instanceof HTMLInputElement&&e.type==="hidden"||e instanceof HTMLAnchorElement&&e.href===""?!1:typeof e.tabIndex=="number"&&e.tabIndex!==-1}function Zr(e){if(e.shadowRoot&&e.shadowRoot.delegatesFocus!==!0)return null;let t=e;t.shadowRoot&&(t=t.shadowRoot);let i=t.querySelector("[autofocus]");if(i)return i;{let a=t.querySelectorAll("slot");for(let n of a){let l=n.assignedElements({flatten:!0});for(let o of l){if(o.hasAttribute("autofocus"))return o;if(i=o.querySelector("[autofocus]"),i)return i}}}let s=e.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),r=s.currentNode;for(;r;){if(Jr(r))return r;r=s.nextNode()}}function Qr(e){Zr(e)?.focus()}var Se=new WeakMap;function hi(e){if(!Dt(e,!1))return;let t=e.ownerDocument;if(!e.dispatchEvent(new _e("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!Dt(e,!1))return;let i=!1;if(e.popover==="auto"){let r=e.getAttribute("popover"),a=Kr(e)||t;if(ke(a,!1,!0),r!==e.getAttribute("popover")||!Dt(e,!1))return}Ae(t)||(i=!0),Se.delete(e);let s=t.activeElement;e.classList.add(":popover-open"),Kt.set(e,"showing"),ye.has(t)||ye.set(t,new Set),ye.get(t).add(e),Qr(e),e.popover==="auto"&&(gt.has(t)||gt.set(t,new Set),gt.get(t).add(e),Is(xe.get(e),!0)),i&&s&&e.popover==="auto"&&Se.set(e,s),Ls(e,"closed","open")}function Xt(e,t=!1,i=!1){if(!Dt(e,!0))return;let s=e.ownerDocument;if(e.popover==="auto"&&(ke(e,t,i),!Dt(e,!0))||(Is(xe.get(e),!1),xe.delete(e),i&&(e.dispatchEvent(new _e("beforetoggle",{oldState:"open",newState:"closed"})),!Dt(e,!0))))return;ye.get(s)?.delete(e),gt.get(s)?.delete(e),e.classList.remove(":popover-open"),Kt.set(e,"hidden"),i&&Ls(e,"open","closed");let r=Se.get(e);r&&(Se.delete(e),t&&r.focus())}function Ts(e,t=!1,i=!1){let s=Ae(e);for(;s;)Xt(s,t,i),s=Ae(e)}function ke(e,t,i){let s=e.ownerDocument||e;if(e instanceof Document)return Ts(s,t,i);let r=null,a=!1;for(let n of gt.get(s)||[])if(n===e)a=!0;else if(a){r=n;break}if(!a)return Ts(s,t,i);for(;r&&we(r)==="showing"&&gt.get(s)?.size;)Xt(r,t,i)}var li=new WeakMap;function Ms(e){if(!e.isTrusted)return;let t=e.composedPath()[0];if(!t)return;let i=t.ownerDocument;if(!Ae(i))return;let r=jr(t);if(r&&e.type==="pointerdown")li.set(i,r);else if(e.type==="pointerup"){let a=li.get(i)===r;li.delete(i),a&&ke(r||i,!1,!0)}}var ui=new WeakMap;function Is(e,t=!1){if(!e)return;ui.has(e)||ui.set(e,e.getAttribute("aria-expanded"));let i=e.popoverTargetElement;if(i instanceof HTMLElement&&i.popover==="auto")e.setAttribute("aria-expanded",String(t));else{let s=ui.get(e);s?e.setAttribute("aria-expanded",s):e.removeAttribute("aria-expanded")}}var Ps=globalThis.ShadowRoot||function(){};function ta(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function Ct(e,t,i){let s=e[t];Object.defineProperty(e,t,{value(r){return s.call(this,i(r))}})}var ea=/(^|[^\\]):popover-open\b/g;function ia(){return typeof globalThis.CSSLayerBlockRule=="function"}function sa(){let e=ia();return`
${e?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${e?"}":""}
`}var Nt=null;function ci(e){let t=sa();if(Nt===null)try{Nt=new CSSStyleSheet,Nt.replaceSync(t)}catch{Nt=!1}if(Nt===!1){let i=document.createElement("style");i.textContent=t,e instanceof Document?e.head.prepend(i):e.prepend(i)}else e.adoptedStyleSheets=[Nt,...e.adoptedStyleSheets]}function ra(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||_e;function e(o){return o?.includes(":popover-open")&&(o=o.replace(ea,"$1.\\:popover-open")),o}Ct(Document.prototype,"querySelector",e),Ct(Document.prototype,"querySelectorAll",e),Ct(Element.prototype,"querySelector",e),Ct(Element.prototype,"querySelectorAll",e),Ct(Element.prototype,"matches",e),Ct(Element.prototype,"closest",e),Ct(DocumentFragment.prototype,"querySelectorAll",e),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;let o=(this.getAttribute("popover")||"").toLowerCase();return o===""||o=="auto"?"auto":"manual"},set(o){o===null?this.removeAttribute("popover"):this.setAttribute("popover",o)}},showPopover:{enumerable:!0,configurable:!0,value(){hi(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){Xt(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(o){Kt.get(this)==="showing"&&o===void 0||o===!1?Xt(this,!0,!0):(o===void 0||o===!0)&&hi(this)}}});let t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(o){let u=t.call(this,o);return ci(u),u}}});let i=HTMLElement.prototype.attachInternals;i&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){let o=i.call(this);return o.shadowRoot&&ci(o.shadowRoot),o}}});let s=new WeakMap;function r(o){Object.defineProperties(o.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(u){if(u===null)this.removeAttribute("popovertarget"),s.delete(this);else if(u instanceof Element)this.setAttribute("popovertarget",""),s.set(this,u);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;let u=s.get(this);if(u&&u.isConnected)return u;if(u&&!u.isConnected)return s.delete(this),null;let d=Rt(this),p=this.getAttribute("popovertarget");return(d instanceof Document||d instanceof Ps)&&p&&d.getElementById(p)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){let u=(this.getAttribute("popovertargetaction")||"").toLowerCase();return u==="show"||u==="hide"?u:"toggle"},set(u){this.setAttribute("popovertargetaction",u)}}})}r(HTMLButtonElement),r(HTMLInputElement);let a=o=>{let u=o.composedPath(),d=u[0];if(!(d instanceof Element)||d?.shadowRoot)return;let p=Rt(d);if(!(p instanceof Ps||p instanceof Document))return;let m=u.find(y=>y.matches?.("[popovertargetaction],[popovertarget]"));if(m){Gr(m),o.preventDefault();return}},n=o=>{let u=o.key,d=o.target;!o.defaultPrevented&&d&&(u==="Escape"||u==="Esc")&&ke(d.ownerDocument,!0,!0)};(o=>{o.addEventListener("click",a),o.addEventListener("keydown",n),o.addEventListener("pointerdown",Ms),o.addEventListener("pointerup",Ms)})(document),ci(document)}ta()||ra();var Pe=class extends Event{oldState;newState;constructor(e,{oldState:t="",newState:i="",...s}={}){super(e,s),this.oldState=String(t||""),this.newState=String(i||"")}},Ns=new WeakMap;function Bs(e,t,i){Ns.set(e,setTimeout(()=>{Ns.has(e)&&e.dispatchEvent(new Pe("toggle",{cancelable:!1,oldState:t,newState:i}))},0))}var gi=globalThis.ShadowRoot||function(){},aa=globalThis.HTMLDialogElement||function(){},Ee=new WeakMap,vt=new WeakMap,Zt=new WeakMap;function Ce(e){return Zt.get(e)||"hidden"}var De=new WeakMap;function na(e){let t=e.popoverTargetElement;if(!(t instanceof HTMLElement))return;let i=Ce(t);e.popoverTargetAction==="show"&&i==="showing"||e.popoverTargetAction==="hide"&&i==="hidden"||(i==="showing"?Jt(t,!0,!0):Mt(t,!1)&&(De.set(t,e),mi(t)))}function Mt(e,t){return!(e.popover!=="auto"&&e.popover!=="manual"||!e.isConnected||t&&Ce(e)!=="showing"||!t&&Ce(e)!=="hidden"||e instanceof aa&&e.hasAttribute("open")||document.fullscreenElement===e)}function Rs(e){return e?Array.from(vt.get(e.ownerDocument)||[]).indexOf(e)+1:0}function oa(e){let t=Ws(e),i=la(e);return Rs(t)>Rs(i)?t:i}function Te(e){let t=vt.get(e);for(let i of t||[])if(!i.isConnected)t.delete(i);else return i;return null}function qt(e){return typeof e.getRootNode=="function"?e.getRootNode():e.parentNode?qt(e.parentNode):e}function Ws(e){for(;e;){if(e instanceof HTMLElement&&e.popover==="auto"&&Zt.get(e)==="showing")return e;if(e=e instanceof Element&&e.assignedSlot||e.parentElement||qt(e),e instanceof gi&&(e=e.host),e instanceof Document)return}}function la(e){for(;e;){let t=e.popoverTargetElement;if(t instanceof HTMLElement)return t;if(e=e.parentElement||qt(e),e instanceof gi&&(e=e.host),e instanceof Document)return}}function ua(e){let t=new Map,i=0;for(let a of vt.get(e.ownerDocument)||[])t.set(a,i),i+=1;t.set(e,i),i+=1;let s=null;function r(a){let n=Ws(a);if(n===null)return null;let l=t.get(n);(s===null||t.get(s)<l)&&(s=n)}return r(e.parentElement||qt(e)),s}function ca(e){return e.hidden||e instanceof gi||(e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement||e instanceof HTMLOptGroupElement||e instanceof HTMLOptionElement||e instanceof HTMLFieldSetElement)&&e.disabled||e instanceof HTMLInputElement&&e.type==="hidden"||e instanceof HTMLAnchorElement&&e.href===""?!1:typeof e.tabIndex=="number"&&e.tabIndex!==-1}function ha(e){if(e.shadowRoot&&e.shadowRoot.delegatesFocus!==!0)return null;let t=e;t.shadowRoot&&(t=t.shadowRoot);let i=t.querySelector("[autofocus]");if(i)return i;{let a=t.querySelectorAll("slot");for(let n of a){let l=n.assignedElements({flatten:!0});for(let o of l){if(o.hasAttribute("autofocus"))return o;if(i=o.querySelector("[autofocus]"),i)return i}}}let s=e.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),r=s.currentNode;for(;r;){if(ca(r))return r;r=s.nextNode()}}function da(e){ha(e)?.focus()}var Me=new WeakMap;function mi(e){if(!Mt(e,!1))return;let t=e.ownerDocument;if(!e.dispatchEvent(new Pe("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!Mt(e,!1))return;let i=!1;if(e.popover==="auto"){let r=e.getAttribute("popover"),a=ua(e)||t;if(Le(a,!1,!0),r!==e.getAttribute("popover")||!Mt(e,!1))return}Te(t)||(i=!0),Me.delete(e);let s=t.activeElement;e.classList.add(":popover-open"),Zt.set(e,"showing"),Ee.has(t)||Ee.set(t,new Set),Ee.get(t).add(e),da(e),e.popover==="auto"&&(vt.has(t)||vt.set(t,new Set),vt.get(t).add(e),Hs(De.get(e),!0)),i&&s&&e.popover==="auto"&&Me.set(e,s),Bs(e,"closed","open")}function Jt(e,t=!1,i=!1){if(!Mt(e,!0))return;let s=e.ownerDocument;if(e.popover==="auto"&&(Le(e,t,i),!Mt(e,!0))||(Hs(De.get(e),!1),De.delete(e),i&&(e.dispatchEvent(new Pe("beforetoggle",{oldState:"open",newState:"closed"})),!Mt(e,!0))))return;Ee.get(s)?.delete(e),vt.get(s)?.delete(e),e.classList.remove(":popover-open"),Zt.set(e,"hidden"),i&&Bs(e,"open","closed");let r=Me.get(e);r&&(Me.delete(e),t&&r.focus())}function Fs(e,t=!1,i=!1){let s=Te(e);for(;s;)Jt(s,t,i),s=Te(e)}function Le(e,t,i){let s=e.ownerDocument||e;if(e instanceof Document)return Fs(s,t,i);let r=null,a=!1;for(let n of vt.get(s)||[])if(n===e)a=!0;else if(a){r=n;break}if(!a)return Fs(s,t,i);for(;r&&Ce(r)==="showing"&&vt.get(s)?.size;)Jt(r,t,i)}var fi=new WeakMap;function qs(e){if(!e.isTrusted)return;let t=e.composedPath()[0];if(!t)return;let i=t.ownerDocument;if(!Te(i))return;let r=oa(t);if(r&&e.type==="pointerdown")fi.set(i,r);else if(e.type==="pointerup"){let a=fi.get(i)===r;fi.delete(i),a&&Le(r||i,!1,!0)}}var pi=new WeakMap;function Hs(e,t=!1){if(!e)return;pi.has(e)||pi.set(e,e.getAttribute("aria-expanded"));let i=e.popoverTargetElement;if(i instanceof HTMLElement&&i.popover==="auto")e.setAttribute("aria-expanded",String(t));else{let s=pi.get(e);s?e.setAttribute("aria-expanded",s):e.removeAttribute("aria-expanded")}}var Vs=globalThis.ShadowRoot||function(){};function Us(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function $s(){return!!(document.body?.showPopover&&!/native code/i.test(document.body.showPopover.toString()))}function Tt(e,t,i){let s=e[t];Object.defineProperty(e,t,{value(r){return s.call(this,i(r))}})}var fa=/(^|[^\\]):popover-open\b/g;function pa(){return typeof globalThis.CSSLayerBlockRule=="function"}function ba(){let e=pa();return`
${e?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${e?"}":""}
`}var Ft=null;function bi(e){let t=ba();if(Ft===null)try{Ft=new CSSStyleSheet,Ft.replaceSync(t)}catch{Ft=!1}if(Ft===!1){let i=document.createElement("style");i.textContent=t,e instanceof Document?e.head.prepend(i):e.prepend(i)}else e.adoptedStyleSheets=[Ft,...e.adoptedStyleSheets]}function Ys(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||Pe;function e(o){return o?.includes(":popover-open")&&(o=o.replace(fa,"$1.\\:popover-open")),o}Tt(Document.prototype,"querySelector",e),Tt(Document.prototype,"querySelectorAll",e),Tt(Element.prototype,"querySelector",e),Tt(Element.prototype,"querySelectorAll",e),Tt(Element.prototype,"matches",e),Tt(Element.prototype,"closest",e),Tt(DocumentFragment.prototype,"querySelectorAll",e),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;let o=(this.getAttribute("popover")||"").toLowerCase();return o===""||o=="auto"?"auto":"manual"},set(o){o===null?this.removeAttribute("popover"):this.setAttribute("popover",o)}},showPopover:{enumerable:!0,configurable:!0,value(){mi(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){Jt(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(o){Zt.get(this)==="showing"&&o===void 0||o===!1?Jt(this,!0,!0):(o===void 0||o===!0)&&mi(this)}}});let t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(o){let u=t.call(this,o);return bi(u),u}}});let i=HTMLElement.prototype.attachInternals;i&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){let o=i.call(this);return o.shadowRoot&&bi(o.shadowRoot),o}}});let s=new WeakMap;function r(o){Object.defineProperties(o.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(u){if(u===null)this.removeAttribute("popovertarget"),s.delete(this);else if(u instanceof Element)this.setAttribute("popovertarget",""),s.set(this,u);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;let u=s.get(this);if(u&&u.isConnected)return u;if(u&&!u.isConnected)return s.delete(this),null;let d=qt(this),p=this.getAttribute("popovertarget");return(d instanceof Document||d instanceof Vs)&&p&&d.getElementById(p)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){let u=(this.getAttribute("popovertargetaction")||"").toLowerCase();return u==="show"||u==="hide"?u:"toggle"},set(u){this.setAttribute("popovertargetaction",u)}}})}r(HTMLButtonElement),r(HTMLInputElement);let a=o=>{let u=o.composedPath(),d=u[0];if(!(d instanceof Element)||d?.shadowRoot)return;let p=qt(d);if(!(p instanceof Vs||p instanceof Document))return;let m=u.find(y=>y.matches?.("[popovertargetaction],[popovertarget]"));if(m){na(m),o.preventDefault();return}},n=o=>{let u=o.key,d=o.target;!o.defaultPrevented&&d&&(u==="Escape"||u==="Esc")&&Le(d.ownerDocument,!0,!0)};(o=>{o.addEventListener("click",a),o.addEventListener("keydown",n),o.addEventListener("pointerdown",qs),o.addEventListener("pointerup",qs)})(document),bi(document)}function P(e){let t=e({css:(s,...r)=>`@layer base { ${s.raw[0]+r.join("")} }`});if(document.adoptedStyleSheets===void 0){let s=document.createElement("style");s.textContent=t,document.head.appendChild(s);return}let i=new CSSStyleSheet;i.replaceSync(t),document.adoptedStyleSheets=[...document.adoptedStyleSheets,i]}function Ie(e,t){let i=e;for(;i;){if(t(i))return i;i=i.parentElement}}function B(e,t){let i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,t?{acceptNode:s=>{let r,a;return t(s,{skip:()=>r=!0,reject:()=>a=!0}),r?NodeFilter.FILTER_SKIP:a?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}:{});return new vi(i)}var vi=class{constructor(t){this.walker=t}from(t){return this.walker.currentNode=t,this}first(){return this.walker.firstChild()}last(){return this.walker.lastChild()}next(t){return this.walker.currentNode=t,this.walker.nextSibling()}nextOrFirst(t){let i=this.next(t);return i||(this.walker.currentNode=this.walker.root,this.first())}prev(t){return this.walker.currentNode=t,this.walker.previousSibling()}prevOrLast(t){let i=this.prev(t);return i||(this.walker.currentNode=this.walker.root,this.last())}closest(t,i){let s=this.from(t).walker;for(;s.currentNode;){if(i(s.currentNode))return s.currentNode;s.parentNode()}}contains(t){return this.find(i=>i===t)}find(t){return this.walk((i,s)=>{t(i)&&s(i)})}findOrFirst(t){return this.find(t)||(this.walker.currentNode=this.walker.root),this.first()}each(t){this.walk(i=>t(i))}some(t){return!!this.find(t)}every(t){let i=!0;return this.walk(s=>{t(s)||(i=!1)}),i}map(t){let i=[];return this.walk(s=>i.push(t(s))),i}filter(t){let i=[];return this.walk(s=>t(s)&&i.push(s)),i}walk(t){let i,s=this.walker,r;for(;s.nextNode()&&(i=s.currentNode,t(i,a=>r=a),r===void 0););return r}};function C(e,t){customElements.define(`ui-${e}`,t)}function x(e,t,i,s={}){return e.addEventListener(t,i,s),{off:()=>e.removeEventListener(t,i),pause:r=>{e.removeEventListener(t,i),r(),e.addEventListener(t,i)}}}function Gs(e){return["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[tabindex]","[contenteditable]"].some(i=>e.matches(i))&&e.tabIndex>=0}function yi(e,t){let i;return function(){let s=this,r=arguments;i||(e.apply(s,r),i=!0,setTimeout(()=>i=!1,t))}}var Ne="pointer";document.addEventListener("keydown",()=>Ne="keyboard",{capture:!0});document.addEventListener("pointerdown",e=>{Ne=e.pointerType==="mouse"?"mouse":"touch"},{capture:!0});function Qt(){return Ne==="keyboard"}function ma(){return Ne==="touch"}function Re(e,t){let i="",s=_a(()=>{i=""},300);e.addEventListener("keydown",r=>{r.key.length===1&&/[a-zA-Z]/.test(r.key)&&(i+=r.key,t(i),r.stopPropagation()),s()})}function ga(e,t){return"lofi-"+(t?t+"-":"")+Math.random().toString(16).slice(2)}function q(e,t){let i=e.hasAttribute("id")?e.getAttribute("id"):ga(e,t);return c(e,"id",i),e._x_bindings||(e._x_bindings={}),e._x_bindings.id||(e._x_bindings.id=i),i}function O(){let e=!1;return t=>(...i)=>{e||(e=!0,t(...i),e=!1)}}function Vt(e,t,{gain:i,lose:s,focusable:r,useSafeArea:a}){let n=!1;r&&document.addEventListener("focusin",p=>{Qt()&&(e.contains(p.target)||t.contains(p.target)?(n=!0,i()):(n=!1,s()))});let l=()=>{},o=()=>{},u=()=>{n=!1,s(),l(),o()},d=()=>{n=!1,l(),o()};return e.addEventListener("pointerenter",p=>{ma()||n||(n=!0,i(),setTimeout(()=>{let{safeArea:m,redraw:y,remove:b}=a?va(e,t,p.clientX,p.clientY):Sa();l=b;let h,k=yi(v=>{let f=t.getBoundingClientRect(),S=e.getBoundingClientRect(),w;switch(m.contains(v.target)&&ya(S,f,v.clientX,v.clientY)?w="safeArea":t.contains(v.target)?w="panel":e.contains(v.target)?w="trigger":w="outside",h&&clearTimeout(h),w){case"outside":u();break;case"trigger":y(v.clientX,v.clientY);break;case"panel":l();break;case"safeArea":y(v.clientX,v.clientY),h=setTimeout(()=>{u()},300);break;default:break}},100);document.addEventListener("pointermove",k),o=()=>document.removeEventListener("pointermove",k)}))}),{clear:d}}function va(e,t,i,s){let r=document.createElement("div"),a=t.getBoundingClientRect(),n=e.getBoundingClientRect();r.style.position="fixed",c(r,"data-safe-area","");let l=(o,u)=>{if(a.top===0&&a.bottom===0)return;let d;a.left<n.left&&(d="left"),a.right>n.right&&(d="right"),a.top<n.top&&a.bottom<u&&(d="up"),a.bottom>n.bottom&&a.top>u&&(d="down"),d===void 0&&(d="right");let p,m,y,b,h,k,v,f,S=10;switch(d){case"left":p=a.right,m=Math.max(a.right,o)+5,y=m-p,b=Math.min(n.top,a.top)-S,h=Math.max(n.bottom,a.bottom)+S,k=h-b,v=u-b,f=`polygon(0% 0%, 100% ${v}px, 0% 100%)`;break;case"right":p=Math.min(a.left,o)-5,m=a.left,y=m-p,b=Math.min(n.top,a.top)-S,h=Math.max(n.bottom,a.bottom)+S,k=h-b,v=u-b,f=`polygon(0% ${v}px, 100% 0%, 100% 100%)`;break;case"up":p=Math.min(o,a.left)-S,m=Math.max(o,a.right)+S,y=m-p,b=a.bottom,h=Math.max(a.bottom,u)+5,k=h-b,v=o-p,f=`polygon(0% 0%, 100% 0%, ${v}px 100%)`;break;case"down":p=Math.min(o,a.left)-S,m=Math.max(o,a.right)+S,y=m-p,b=Math.min(a.top,u)-5,h=a.top,k=h-b,v=o-p,f=`polygon(${v}px 0%, 100% 100%, 0% 100%)`;break}r.style.left=`${p}px`,r.style.top=`${b}px`,r.style.width=`${y}px`,r.style.height=`${k}px`,r.style.clipPath=f};return{safeArea:r,redraw:(o,u)=>{r.isConnected||e.appendChild(r),l(o,u)},remove:()=>{r.remove()}}}function ya(e,t,i,s){return!wa(e,i,s)&&!xa(t,i,s)}function wa(e,t,i){return e.left<=t&&t<=e.right&&e.top<=i&&i<=e.bottom}function xa(e,t,i){return e.left<=t&&t<=e.right&&e.top<=i&&i<=e.bottom}function c(e,t,i){e._durableAttributeObserver===void 0&&(e._durableAttributeObserver=js(e,[t])),e._durableAttributeObserver.hasAttribute(t)||e._durableAttributeObserver.addAttribute(t),e._durableAttributeObserver.pause(()=>{e.setAttribute(t,i)})}function Fe(e,t){A(e,t),Aa(e,t)}function A(e,t){e._durableAttributeObserver===void 0&&(e._durableAttributeObserver=js(e,[t])),e._durableAttributeObserver.hasAttribute(t)||e._durableAttributeObserver.addAttribute(t),e._durableAttributeObserver.pause(()=>{e.removeAttribute(t)})}function Aa(e,t){e?._durableAttributeObserver?.hasAttribute(t)&&e._durableAttributeObserver.releaseAttribute(t)}function js(e,t){let i=r=>{r.forEach(a=>{a.oldValue===null?e._durableAttributeObserver.pause(()=>A(e,a.attributeName)):e._durableAttributeObserver.pause(()=>c(e,a.attributeName,a.oldValue))})},s=new MutationObserver(r=>i(r));return s.observe(e,{attributeFilter:t,attributeOldValue:!0}),{attributes:t,hasAttribute(r){return this.attributes.includes(r)},addAttribute(r){this.attributes.includes(r)||this.attributes.push(r),s.observe(e,{attributeFilter:this.attributes,attributeOldValue:!0})},releaseAttribute(r){this.hasAttribute(r)&&s.observe(e,{attributeFilter:this.attributes,attributeOldValue:!0})},pause(r){i(s.takeRecords()),s.disconnect(),r(),s.observe(e,{attributeFilter:this.attributes,attributeOldValue:!0})}}}function Sa(){return{safeArea:{contains:()=>!1},redraw:()=>{},remove:()=>{}}}function _a(e,t){let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>{e(...s)},t)}}var Oe=0;function pt(e=!1){if(e)return{lock:()=>{},unlock:()=>{}};let t=()=>{};return{lock(){Oe++,!(Oe>1)&&(t=ka(zs(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),zs(document.documentElement,"overflow","hidden")))},unlock(){Oe=Math.max(0,Oe-1),t()}}}function zs(e,t,i){let s=e.style[t];return e.style[t]=i,()=>{e.style[t]=s}}function ka(...e){return(...t)=>{for(let i of e)i(...t)}}function Bt(e,t,i){let s=(n,l)=>o=>{o.key===n&&!t()&&(l(),o.preventDefault(),o.stopPropagation())};c(e,"role","button");let r=()=>{e.hasAttribute("disabled")?(c(e,"aria-disabled","true"),c(e,"tabindex","-1")):(A(e,"aria-disabled"),c(e,"tabindex","0"))};new MutationObserver(()=>r()).observe(e,{attributes:!0,attributeFilter:["disabled"]}),r(),x(e,"click",()=>i()),x(e,"keydown",s("Enter",()=>i())),x(e,"keydown",s(" ",()=>{})),x(e,"keyup",s(" ",()=>i()))}function Xs(e,t,i=null){let s=()=>{let n=e.getAttribute(t),l={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};for(let[o,u]of Object.entries(l).reverse()){let d=e.getAttribute(`${o}:${t}`);if(d&&window.innerWidth>=u)return d}return n||i},r=s(),a=[];return new ResizeObserver(()=>{let n=s(),l=JSON.stringify(r);JSON.stringify(n)!==l&&(r=n,a.forEach(o=>o(n)))}).observe(window.document.documentElement),[r,n=>a.push(n)]}function lt(){return navigator?.language||document.documentElement.lang||"en-US"}function qe(e,t={slots:{},attrs:{}}){let{slots:i={},attrs:s={}}=t,r=e.content.cloneNode(!0).firstElementChild;return Object.entries(i).forEach(([a,n])=>{(a==="default"?r.querySelectorAll("slot:not([name])"):r.querySelectorAll(`slot[name="${a}"]`)).forEach(o=>o.replaceWith(typeof n=="string"?document.createTextNode(n):n))}),r.querySelectorAll("slot").forEach(a=>a.remove()),Object.entries(s).forEach(([a,n])=>{r.setAttribute(a,n)}),r}var D=class extends HTMLElement{constructor(){super(),this.boot?.()}connectedCallback(){queueMicrotask(()=>{this.mount?.()})}mixin(t,i={}){return new t(this,i)}appendMixin(t,i={}){return new t(this,i)}use(t){let i;return this.mixins.forEach(s=>{s instanceof t&&(i=s)}),i}uses(t){let i;return this.mixins.forEach(s=>{s instanceof t&&(i=!0)}),!!i}on(t,i){return x(this,t,i)}root(t,i={}){if(t===void 0)return this.__root;let s=document.createElement(t);for(let a in i)setAttribute(s,a,i[a]);let r=this.attachShadow({mode:"open"});return s.appendChild(document.createElement("slot")),r.appendChild(s),this.__root=s,this.__root}},W=class extends D{};var F=class{constructor(t,i={}){this.el=t,this.grouped=i.grouped===void 0,this.el.mixins=this.el.mixins?this.el.mixins:new Map,this.el.mixins.set(this.constructor.name,this),this.el[this.constructor.name]=!0,this.el.use||(this.el.use=D.prototype.use.bind(this.el)),this.opts=i,this.boot?.({options:s=>{let r=s;Object.entries(this.opts).forEach(([a,n])=>{n!==void 0&&(r[a]=n)}),this.opts=r}}),queueMicrotask(()=>{this.mount?.()})}options(){return this.opts}hasGroup(){return!!this.group()}group(){if(this.grouped!==!1)return Ie(this.el,t=>t[this.groupedByType.name])?.use(this.groupedByType)}on(t,i){return x(this.el,t,i)}},bt=class extends F{constructor(t,i={}){super(t,i)}walker(){return B(this.el,(t,{skip:i,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name]||!t.mixins.get(this.groupOfType.name).grouped)return i()})}};var I=class extends F{boot({options:t}){this.initialState=this.el.value,this.getterFunc=()=>{},this.setterFunc=i=>this.initialState=i,Object.defineProperty(this.el,"value",{get:()=>this.getterFunc(),set:i=>{this.setterFunc(i)}})}initial(t){t(this.initialState)}getter(t){this.getterFunc=t}setter(t){this.setterFunc=t}dispatch(){this.el.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})),this.el.dispatchEvent(new Event("change",{bubbles:!1,cancelable:!0}))}};var Ve=class extends F{boot({options:t}){this.onChanges=[],this.state=!1}onChange(t){this.onChanges.push(t)}getState(){return this.state}setState(t){let i=this.state;this.state=!!t,this.state!==i&&this.onChanges.forEach(s=>s())}};var wi=class extends D{boot(){let t=this.button(),i=this.details();if(t){if(!i)return console.warn("ui-disclosure: no panel element found",this)}else return console.warn("ui-disclosure: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),this._controllable=new I(this,{disabled:this._disabled}),i._disclosable=new Ve(i),this._controllable.initial(a=>a&&i._disclosable.setState(!0)),this._controllable.getter(()=>i._disclosable.getState()),this._controllable.setter(a=>i._disclosable.setState(a)),i._disclosable.onChange(()=>{this.dispatchEvent(new CustomEvent("lofi-disclosable-change",{bubbles:!0})),this._controllable.dispatch()});let s=()=>{i._disclosable.getState()?(c(this,"data-open",""),c(t,"data-open",""),c(i,"data-open","")):(A(this,"data-open"),A(t,"data-open"),A(i,"data-open"))};i._disclosable.onChange(()=>s()),s(),this._disabled||x(t,"click",a=>{i._disclosable.setState(!i._disclosable.getState())});let r=q(i,"disclosure");c(t,"aria-controls",r),c(t,"aria-expanded","false"),i._disclosable.onChange(()=>{i._disclosable.getState()?c(t,"aria-expanded","true"):c(t,"aria-expanded","false")}),this.hasAttribute("open")&&i._disclosable.setState(!0)}button(){return this.querySelector("button")}details(){return this.lastElementChild}},xi=class e extends D{boot(){this.exclusive=this.hasAttribute("exclusive"),this.exclusive&&x(this,"lofi-disclosable-change",t=>{t.stopPropagation(),t.target.localName==="ui-disclosure"&&t.target.value&&this.disclosureWalker().each(i=>{i!==t.target&&(i.value=!1)})})}disclosureWalker(){return B(this,(t,{skip:i,reject:s})=>{if(t instanceof e&&t!==this||t.localName!=="ui-disclosure")return s()})}};P(({css:e})=>e`ui-disclosure { display: block; }`);C("disclosure",wi);C("disclosure-group",xi);var Ai=class extends D{boot(){}},Si=class extends D{boot(){let t=this.hasAttribute("resize")?this.getAttribute("resize"):"both",i=this.hasAttribute("shrink"),s=this.closest("ui-resizable"),r,a,n=!1;if(!s)throw"Resizable container not found";this.addEventListener("pointerdown",l=>{n||(r=s.offsetWidth,a=s.offsetHeight,n=!0);let o=l.clientX,u=l.clientY,d=parseInt(getComputedStyle(s).width,10),p=parseInt(getComputedStyle(s).height,10),m=y=>{let b=d+(y.clientX-o),h=p+(y.clientY-u);(t==="width"||t==="both")&&(i?s.style.width=`${Math.min(b,r)}px`:s.style.width=`${b}px`),(t==="height"||t==="both")&&(i?s.style.height=`${Math.min(h,a)}px`:s.style.height=`${h}px`)};document.addEventListener("pointermove",m),document.addEventListener("pointerup",()=>{this.releasePointerCapture(l.pointerId),document.removeEventListener("pointermove",m)},{once:!0}),this.setPointerCapture(l.pointerId)})}};P(({css:e})=>e`ui-resizable { display: block; }`);C("resizable",Ai);C("grip",Si);var Y=class extends bt{groupOfType=L;boot({options:t}){t({multiple:!1}),this.state=this.options().multiple?new Set:null,this.onChanges=[]}onInitAndChange(t){t(),this.onChanges.push(t)}onChange(t){this.onChanges.push(t)}changed(t,i=!1){if(t.ungrouped)return;let s=t.value,r=t.isSelected(),a=this.options().multiple;r?a?this.state.add(s):this.state=s:a?this.state.delete(s):this.state=null,i||this.onChanges.forEach(n=>n())}getState(){return this.options().multiple?Array.from(this.state):this.state}hasValue(t){return this.options().multiple?this.state.has(t):this.state===t}setState(t){(t===null||t==="")&&(t=this.options().multiple?[]:""),this.options().multiple?(Array.isArray(t)||(t=[t]),t=t.map(s=>s+"")):t=t+"",this.state=this.options().multiple?new Set(t):t;let i=this.options().multiple?t:[t];this.walker().each(s=>{let r=s.use(L);if(r.ungrouped)return;let a=i.includes(r.value);a&&!r.isSelected()?r.surgicallySelect():!a&&r.isSelected()&&r.surgicallyDeselect()}),this.onChanges.forEach(s=>s())}selected(){return this.walker().find(t=>t.use(L).isSelected()).use(L)}selecteds(){return this.walker().filter(t=>t.use(L).isSelected()).map(t=>t.use(L))}selectFirst(){this.walker().first()?.use(L).select()}selectAll(){this.walker().filter(t=>!t.use(L).isSelected()).map(t=>t.use(L).select())}deselectAll(){this.walker().filter(t=>t.use(L).isSelected()).map(t=>t.use(L).deselect())}allAreSelected(){return this.walker().filter(t=>t.use(L).isSelected()).length===this.walker().filter(t=>!0).length}noneAreSelected(){return this.state===null||this.state?.size===0}selectableByValue(t){return this.walker().find(i=>i.use(L).value===t)?.use(L)}deselectOthers(t){this.walker().each(i=>{i!==t&&i.use(L).surgicallyDeselect()})}selectedTextValue(){return this.options().multiple?Array.from(this.state).map(t=>this.convertValueStringToElementText(t)).join(", "):this.convertValueStringToElementText(this.state)}convertValueStringToElementText(t){let i=this.findByValue(t);return i?i.label||i.value:t}findByValue(t){return this.selecteds().find(i=>i.value===t)}walker(){return B(this.el,(t,{skip:i,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name]||t.mixins.get(this.groupOfType.name).ungrouped)return i()})}},L=class extends F{boot({options:t}){this.groupedByType=Y,t({ungrouped:!1,togglable:!1,value:void 0,label:void 0,selectedInitially:!1,dataAttr:"data-selected",ariaAttr:"aria-selected"}),this.ungrouped=this.options().ungrouped,this.value=this.options().value===void 0?this.el.value:this.options().value,this.value=this.value+"",this.label=this.options().label;let i=this.options().selectedInitially;this.group()&&this.group().hasValue(this.value)&&(i=!0),this.multiple=this.hasGroup()?this.group().options().multiple:!1,this.toggleable=this.options().toggleable||this.multiple,this.onSelects=[],this.onUnselects=[],this.onChanges=[],i?this.select(!0):(this.state=i,this.surgicallyDeselect(!0))}mount(){this.el.hasAttribute(this.options().ariaAttr)||c(this.el,this.options().ariaAttr,"false")}onChange(t){this.onChanges.push(t)}onSelect(t){this.onSelects.push(t)}onUnselect(t){this.onUnselects.push(t)}setState(t){t?this.select():this.deselect()}getState(){return this.state}press(){this.toggleable?this.toggle():this.select()}trigger(){this.toggleable?this.toggle():this.select()}toggle(){this.isSelected()?this.deselect():this.select()}isSelected(){return this.state}select(t=!1){let i=!this.isSelected();this.toggleable||this.group()?.deselectOthers(this.el),this.state=!0,c(this.el,this.options().ariaAttr,"true"),c(this.el,this.options().dataAttr,""),i&&(t||(this.onSelects.forEach(s=>s()),this.onChanges.forEach(s=>s())),this.group()?.changed(this,t))}surgicallySelect(){let t=!this.isSelected();this.state=!0,c(this.el,this.options().ariaAttr,"true"),c(this.el,this.options().dataAttr,""),t&&(this.onSelects.forEach(i=>i()),this.onChanges.forEach(i=>i()))}deselect(t=!0){let i=this.isSelected();this.state=!1,c(this.el,this.options().ariaAttr,"false"),A(this.el,this.options().dataAttr),i&&(this.onUnselects.forEach(s=>s()),this.onChanges.forEach(s=>s()),t&&this.group()?.changed(this))}surgicallyDeselect(t=!1){let i=this.isSelected();this.state=!1,c(this.el,this.options().ariaAttr,"false"),A(this.el,this.options().dataAttr),i&&!t&&(this.onUnselects.forEach(s=>s()),this.onChanges.forEach(s=>s()))}getValue(){return this.value}getLabel(){return this.label}};var R=class extends F{boot({options:t}){this.onChanges=[],Object.defineProperty(this.el,"disabled",{get:()=>this.el.hasAttribute("disabled"),set:s=>{s?this.el.setAttribute("disabled",""):this.el.removeAttribute("disabled")}}),this.el.hasAttribute("disabled")?this.el.disabled=!0:this.el.closest("[disabled]")&&(this.el.disabled=!0),new MutationObserver(s=>{this.onChanges.forEach(r=>r(this.el.disabled))}).observe(this.el,{attributeFilter:["disabled"]})}onChange(t){this.onChanges.push(t)}onInitAndChange(t){t(this.el.disabled),this.onChanges.push(t)}enabled(t){return(...i)=>{if(!this.el.disabled)return t(...i)}}disabled(t){return(...i)=>{if(this.el.disabled)return t(...i)}}isDisabled(){return this.el.disabled}};var _i=class e extends W{boot(){this._disableable=new R(this);let t=[];this._disableable.onInitAndChange(i=>{i?this.walker().each(s=>{s.hasAttribute("disabled")||(s.setAttribute("disabled",""),t.push(()=>s.removeAttribute("disabled")))}):(t.forEach(s=>s()),t=[])}),this._selectable=new Y(this,{multiple:!0}),this._controllable=new I(this,{disabled:this._disabled}),this._controllable.initial(i=>i&&this._selectable.setState(i)),this._controllable.getter(()=>this._selectable.getState()),this._detangled=O(),this._controllable.setter(this._detangled(i=>{this._selectable.setState(i)})),this._selectable.onChange(this._detangled(()=>{this._controllable.dispatch()})),c(this,"role","group")}initCheckAll(t){let i=O();t._selectable.onChange(i(()=>{t.indeterminate?(this._selectable.selectAll(),t.checked=!0,t.indeterminate=!1):t.checked?(this._selectable.selectAll(),t.checked=!0,t.indeterminate=!1):(this._selectable.deselectAll(),t.checked=!1,t.indeterminate=!1)}));let s=()=>{this._selectable.allAreSelected()?(t.indeterminate=!1,t._selectable.select()):this._selectable.noneAreSelected()?(t.indeterminate=!1,t._selectable.deselect()):t.indeterminate=!0};this._selectable.onChange(i(()=>{s()})),s()}walker(){return B(this,(t,{skip:i,reject:s})=>{if(t instanceof e)return s();if(t.localName!=="ui-checkbox")return i()})}},ki=class extends W{boot(){let t=this;this.isIndeterminate=!1,this._disableable=new R(this),this.hasAttribute("all")?(this._selectable=new L(t,{ungrouped:!0,toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked"),dataAttr:"data-checked",ariaAttr:"aria-checked"}),queueMicrotask(()=>{this.closest("ui-checkbox-group")?.initCheckAll(this)})):(this._selectable=new L(t,{toggleable:!0,dataAttr:"data-checked",ariaAttr:"aria-checked",value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked")}),this._selectable.onChange(()=>{this.indeterminate&&(this.indeterminate=!1)}),this.value=this._selectable.getValue()),this._detangled=O(),this._selectable.onChange(this._detangled(()=>{this.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})),this.dispatchEvent(new Event("change",{bubbles:!1,cancelable:!0}))})),c(t,"role","checkbox"),this._disableable.onInitAndChange(i=>{i?A(t,"tabindex","0"):c(t,"tabindex","0")}),x(t,"click",this._disableable.disabled(i=>{i.preventDefault(),i.stopPropagation()}),{capture:!0}),x(t,"click",this._disableable.enabled(i=>{this._selectable.press()})),x(t,"keydown",this._disableable.enabled(i=>{i.key==="Enter"&&(this._selectable.press(),i.preventDefault(),i.stopPropagation())})),x(t,"keydown",this._disableable.enabled(i=>{i.key===" "&&(i.preventDefault(),i.stopPropagation())})),x(t,"keyup",this._disableable.enabled(i=>{i.key===" "&&(this._selectable.press(),i.preventDefault(),i.stopPropagation())})),Ea(t)}get checked(){return this._selectable.isSelected()}set checked(t){let i=this.closest("ui-checkbox-group")?._detangled||(s=>s);this._detangled(i(()=>{t?this._selectable.select():this._selectable.deselect()}))()}get indeterminate(){return this.isIndeterminate}set indeterminate(t){this.isIndeterminate=!!t,this.isIndeterminate?c(this,"data-indeterminate",""):A(this,"data-indeterminate")}};C("checkbox-group",_i);C("checkbox",ki);P(({css:e})=>e`ui-checkbox-group { display: block; user-select: none; }`);P(({css:e})=>e`ui-checkbox { display: inline-block; user-select: none; }`);function Ea(e){e.closest("label")?.addEventListener("click",t=>{e.contains(t.target)||e._selectable.press()})}var yt=new Map,et=class extends F{boot({options:t}){t({triggers:[],scope:null});let i=this.options().scope||"global";c(this.el,"popover","manual"),this.triggers=this.options().triggers,this.onChanges=[],this.state=!1,x(this.el,"beforetoggle",s=>{let r=this.state;if(this.state=s.newState==="open",this.state){Ca(this.el,i);let a=new AbortController,n=document.activeElement,l=[...this.triggers,n];setTimeout(()=>{Da(this.el,l,a),Ta(this.el,l,a),Ma(this.el,l,a)}),this.el.addEventListener("beforetoggle",o=>{o.newState==="closed"&&(a.abort(),n?.focus())},{signal:a.signal})}r!==this.state&&this.onChanges.forEach(a=>a(this.state,r))}),x(this.el,"toggle",s=>{if(s.newState==="open")yt.has(i)||yt.set(i,new Set),yt.get(i).add(this.el);else if(s.newState==="closed"){if(!yt.has(i))return;yt.get(i).delete(this.el),yt.get(i).size===0&&yt.delete(i)}})}onChange(t){this.onChanges.push(t)}setState(t){t?this.show():this.hide()}getState(){return this.state}toggle(){this.el.togglePopover()}show(){this.el.showPopover()}hide(){this.el.hidePopover()}};function Ca(e,t){yt.has(t)&&yt.get(t).forEach(i=>{e.contains(i)||i.contains(e)||i.hidePopover()})}function Da(e,t,i){document.addEventListener("click",s=>{e.contains(s.target)||t.includes(s.target)||e.hidePopover()},{signal:i.signal})}function Ta(e,t,i){document.addEventListener("focusin",s=>{e.contains(s.target)||t.includes(s.target)||(i.abort(),e.hidePopover())},{capture:!0,signal:i.signal})}function Ma(e,t,i){document.addEventListener("keydown",s=>{s.key==="Escape"&&e.hidePopover()},{signal:i.signal})}var _t=Math.min,K=Math.max,ee=Math.round,ie=Math.floor,ut=e=>({x:e,y:e}),Pa={left:"right",right:"left",bottom:"top",top:"bottom"},La={start:"end",end:"start"};function Ei(e,t,i){return K(e,_t(t,i))}function Wt(e,t){return typeof e=="function"?e(t):e}function wt(e){return e.split("-")[0]}function Ht(e){return e.split("-")[1]}function Ci(e){return e==="x"?"y":"x"}function Di(e){return e==="y"?"height":"width"}function kt(e){return["top","bottom"].includes(wt(e))?"y":"x"}function Ti(e){return Ci(kt(e))}function Ks(e,t,i){i===void 0&&(i=!1);let s=Ht(e),r=Ti(e),a=Di(r),n=r==="x"?s===(i?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(n=te(n)),[n,te(n)]}function Js(e){let t=te(e);return[Be(e),t,Be(t)]}function Be(e){return e.replace(/start|end/g,t=>La[t])}function Oa(e,t,i){let s=["left","right"],r=["right","left"],a=["top","bottom"],n=["bottom","top"];switch(e){case"top":case"bottom":return i?t?r:s:t?s:r;case"left":case"right":return t?a:n;default:return[]}}function Zs(e,t,i,s){let r=Ht(e),a=Oa(wt(e),i==="start",s);return r&&(a=a.map(n=>n+"-"+r),t&&(a=a.concat(a.map(Be)))),a}function te(e){return e.replace(/left|right|bottom|top/g,t=>Pa[t])}function Ia(e){return{top:0,right:0,bottom:0,left:0,...e}}function Qs(e){return typeof e!="number"?Ia(e):{top:e,right:e,bottom:e,left:e}}function Pt(e){let{x:t,y:i,width:s,height:r}=e;return{width:s,height:r,top:i,left:t,right:t+s,bottom:i+r,x:t,y:i}}function tr(e,t,i){let{reference:s,floating:r}=e,a=kt(t),n=Ti(t),l=Di(n),o=wt(t),u=a==="y",d=s.x+s.width/2-r.width/2,p=s.y+s.height/2-r.height/2,m=s[l]/2-r[l]/2,y;switch(o){case"top":y={x:d,y:s.y-r.height};break;case"bottom":y={x:d,y:s.y+s.height};break;case"right":y={x:s.x+s.width,y:p};break;case"left":y={x:s.x-r.width,y:p};break;default:y={x:s.x,y:s.y}}switch(Ht(t)){case"start":y[n]-=m*(i&&u?-1:1);break;case"end":y[n]+=m*(i&&u?-1:1);break}return y}var er=async(e,t,i)=>{let{placement:s="bottom",strategy:r="absolute",middleware:a=[],platform:n}=i,l=a.filter(Boolean),o=await(n.isRTL==null?void 0:n.isRTL(t)),u=await n.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:p}=tr(u,s,o),m=s,y={},b=0;for(let h=0;h<l.length;h++){let{name:k,fn:v}=l[h],{x:f,y:S,data:w,reset:_}=await v({x:d,y:p,initialPlacement:s,placement:m,strategy:r,middlewareData:y,rects:u,platform:n,elements:{reference:e,floating:t}});d=f??d,p=S??p,y={...y,[k]:{...y[k],...w}},_&&b<=50&&(b++,typeof _=="object"&&(_.placement&&(m=_.placement),_.rects&&(u=_.rects===!0?await n.getElementRects({reference:e,floating:t,strategy:r}):_.rects),{x:d,y:p}=tr(u,m,o)),h=-1)}return{x:d,y:p,placement:m,strategy:r,middlewareData:y}};async function We(e,t){var i;t===void 0&&(t={});let{x:s,y:r,platform:a,rects:n,elements:l,strategy:o}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:m=!1,padding:y=0}=Wt(t,e),b=Qs(y),k=l[m?p==="floating"?"reference":"floating":p],v=Pt(await a.getClippingRect({element:(i=await(a.isElement==null?void 0:a.isElement(k)))==null||i?k:k.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:o})),f=p==="floating"?{x:s,y:r,width:n.floating.width,height:n.floating.height}:n.reference,S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),w=await(a.isElement==null?void 0:a.isElement(S))?await(a.getScale==null?void 0:a.getScale(S))||{x:1,y:1}:{x:1,y:1},_=Pt(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:f,offsetParent:S,strategy:o}):f);return{top:(v.top-_.top+b.top)/w.y,bottom:(_.bottom-v.bottom+b.bottom)/w.y,left:(v.left-_.left+b.left)/w.x,right:(_.right-v.right+b.right)/w.x}}var ir=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,s;let{placement:r,middlewareData:a,rects:n,initialPlacement:l,platform:o,elements:u}=t,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:h=!0,...k}=Wt(e,t);if((i=a.arrow)!=null&&i.alignmentOffset)return{};let v=wt(r),f=kt(l),S=wt(l)===l,w=await(o.isRTL==null?void 0:o.isRTL(u.floating)),_=m||(S||!h?[te(l)]:Js(l)),E=b!=="none";!m&&E&&_.push(...Zs(l,h,b,w));let T=[l,..._],N=await We(t,k),rt=[],G=((s=a.flip)==null?void 0:s.overflows)||[];if(d&&rt.push(N[v]),p){let j=Ks(r,n,w);rt.push(N[j[0]],N[j[1]])}if(G=[...G,{placement:r,overflows:rt}],!rt.every(j=>j<=0)){var at,Z;let j=(((at=a.flip)==null?void 0:at.index)||0)+1,ft=T[j];if(ft)return{data:{index:j,overflows:G},reset:{placement:ft}};let $=(Z=G.filter(mt=>mt.overflows[0]<=0).sort((mt,X)=>mt.overflows[1]-X.overflows[1])[0])==null?void 0:Z.placement;if(!$)switch(y){case"bestFit":{var Q;let mt=(Q=G.filter(X=>{if(E){let tt=kt(X.placement);return tt===f||tt==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(tt=>tt>0).reduce((tt,Yr)=>tt+Yr,0)]).sort((X,tt)=>X[1]-tt[1])[0])==null?void 0:Q[0];mt&&($=mt);break}case"initialPlacement":$=l;break}if(r!==$)return{reset:{placement:$}}}return{}}}};async function Na(e,t){let{placement:i,platform:s,elements:r}=e,a=await(s.isRTL==null?void 0:s.isRTL(r.floating)),n=wt(i),l=Ht(i),o=kt(i)==="y",u=["left","top"].includes(n)?-1:1,d=a&&o?-1:1,p=Wt(t,e),{mainAxis:m,crossAxis:y,alignmentAxis:b}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof b=="number"&&(y=l==="end"?b*-1:b),o?{x:y*d,y:m*u}:{x:m*u,y:y*d}}var sr=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,s;let{x:r,y:a,placement:n,middlewareData:l}=t,o=await Na(t,e);return n===((i=l.offset)==null?void 0:i.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+o.x,y:a+o.y,data:{...o,placement:n}}}}},rr=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:i,y:s,placement:r}=t,{mainAxis:a=!0,crossAxis:n=!1,limiter:l={fn:k=>{let{x:v,y:f}=k;return{x:v,y:f}}},...o}=Wt(e,t),u={x:i,y:s},d=await We(t,o),p=kt(wt(r)),m=Ci(p),y=u[m],b=u[p];if(a){let k=m==="y"?"top":"left",v=m==="y"?"bottom":"right",f=y+d[k],S=y-d[v];y=Ei(f,y,S)}if(n){let k=p==="y"?"top":"left",v=p==="y"?"bottom":"right",f=b+d[k],S=b-d[v];b=Ei(f,b,S)}let h=l.fn({...t,[m]:y,[p]:b});return{...h,data:{x:h.x-i,y:h.y-s,enabled:{[m]:a,[p]:n}}}}}};var ar=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var i,s;let{placement:r,rects:a,platform:n,elements:l}=t,{apply:o=()=>{},...u}=Wt(e,t),d=await We(t,u),p=wt(r),m=Ht(r),y=kt(r)==="y",{width:b,height:h}=a.floating,k,v;p==="top"||p==="bottom"?(k=p,v=m===(await(n.isRTL==null?void 0:n.isRTL(l.floating))?"start":"end")?"left":"right"):(v=p,k=m==="end"?"top":"bottom");let f=h-d.top-d.bottom,S=b-d.left-d.right,w=_t(h-d[k],f),_=_t(b-d[v],S),E=!t.middlewareData.shift,T=w,N=_;if((i=t.middlewareData.shift)!=null&&i.enabled.x&&(N=S),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(T=f),E&&!m){let G=K(d.left,0),at=K(d.right,0),Z=K(d.top,0),Q=K(d.bottom,0);y?N=b-2*(G!==0||at!==0?G+at:K(d.left,d.right)):T=h-2*(Z!==0||Q!==0?Z+Q:K(d.top,d.bottom))}await o({...t,availableWidth:N,availableHeight:T});let rt=await n.getDimensions(l.floating);return b!==rt.width||h!==rt.height?{reset:{rects:!0}}:{}}}};function He(){return typeof window<"u"}function Lt(e){return or(e)?(e.nodeName||"").toLowerCase():"#document"}function it(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ct(e){var t;return(t=(or(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function or(e){return He()?e instanceof Node||e instanceof it(e).Node:!1}function nt(e){return He()?e instanceof Element||e instanceof it(e).Element:!1}function ht(e){return He()?e instanceof HTMLElement||e instanceof it(e).HTMLElement:!1}function nr(e){return!He()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof it(e).ShadowRoot}function $t(e){let{overflow:t,overflowX:i,overflowY:s,display:r}=ot(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+i)&&!["inline","contents"].includes(r)}function lr(e){return["table","td","th"].includes(Lt(e))}function se(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ue(e){let t=$e(),i=nt(e)?ot(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>i[s]?i[s]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(i.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(i.contain||"").includes(s))}function ur(e){let t=xt(e);for(;ht(t)&&!Ot(t);){if(Ue(t))return t;if(se(t))return null;t=xt(t)}return null}function $e(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ot(e){return["html","body","#document"].includes(Lt(e))}function ot(e){return it(e).getComputedStyle(e)}function re(e){return nt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function xt(e){if(Lt(e)==="html")return e;let t=e.assignedSlot||e.parentNode||nr(e)&&e.host||ct(e);return nr(t)?t.host:t}function cr(e){let t=xt(e);return Ot(t)?e.ownerDocument?e.ownerDocument.body:e.body:ht(t)&&$t(t)?t:cr(t)}function Ut(e,t,i){var s;t===void 0&&(t=[]),i===void 0&&(i=!0);let r=cr(e),a=r===((s=e.ownerDocument)==null?void 0:s.body),n=it(r);if(a){let l=Ye(n);return t.concat(n,n.visualViewport||[],$t(r)?r:[],l&&i?Ut(l):[])}return t.concat(r,Ut(r,[],i))}function Ye(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function fr(e){let t=ot(e),i=parseFloat(t.width)||0,s=parseFloat(t.height)||0,r=ht(e),a=r?e.offsetWidth:i,n=r?e.offsetHeight:s,l=ee(i)!==a||ee(s)!==n;return l&&(i=a,s=n),{width:i,height:s,$:l}}function Pi(e){return nt(e)?e:e.contextElement}function Yt(e){let t=Pi(e);if(!ht(t))return ut(1);let i=t.getBoundingClientRect(),{width:s,height:r,$:a}=fr(t),n=(a?ee(i.width):i.width)/s,l=(a?ee(i.height):i.height)/r;return(!n||!Number.isFinite(n))&&(n=1),(!l||!Number.isFinite(l))&&(l=1),{x:n,y:l}}var Ra=ut(0);function pr(e){let t=it(e);return!$e()||!t.visualViewport?Ra:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Fa(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==it(e)?!1:t}function It(e,t,i,s){t===void 0&&(t=!1),i===void 0&&(i=!1);let r=e.getBoundingClientRect(),a=Pi(e),n=ut(1);t&&(s?nt(s)&&(n=Yt(s)):n=Yt(e));let l=Fa(a,i,s)?pr(a):ut(0),o=(r.left+l.x)/n.x,u=(r.top+l.y)/n.y,d=r.width/n.x,p=r.height/n.y;if(a){let m=it(a),y=s&&nt(s)?it(s):s,b=m,h=Ye(b);for(;h&&s&&y!==b;){let k=Yt(h),v=h.getBoundingClientRect(),f=ot(h),S=v.left+(h.clientLeft+parseFloat(f.paddingLeft))*k.x,w=v.top+(h.clientTop+parseFloat(f.paddingTop))*k.y;o*=k.x,u*=k.y,d*=k.x,p*=k.y,o+=S,u+=w,b=it(h),h=Ye(b)}}return Pt({width:d,height:p,x:o,y:u})}function Li(e,t){let i=re(e).scrollLeft;return t?t.left+i:It(ct(e)).left+i}function br(e,t,i){i===void 0&&(i=!1);let s=e.getBoundingClientRect(),r=s.left+t.scrollLeft-(i?0:Li(e,s)),a=s.top+t.scrollTop;return{x:r,y:a}}function qa(e){let{elements:t,rect:i,offsetParent:s,strategy:r}=e,a=r==="fixed",n=ct(s),l=t?se(t.floating):!1;if(s===n||l&&a)return i;let o={scrollLeft:0,scrollTop:0},u=ut(1),d=ut(0),p=ht(s);if((p||!p&&!a)&&((Lt(s)!=="body"||$t(n))&&(o=re(s)),ht(s))){let y=It(s);u=Yt(s),d.x=y.x+s.clientLeft,d.y=y.y+s.clientTop}let m=n&&!p&&!a?br(n,o,!0):ut(0);return{width:i.width*u.x,height:i.height*u.y,x:i.x*u.x-o.scrollLeft*u.x+d.x+m.x,y:i.y*u.y-o.scrollTop*u.y+d.y+m.y}}function Va(e){return Array.from(e.getClientRects())}function Ba(e){let t=ct(e),i=re(e),s=e.ownerDocument.body,r=K(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=K(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),n=-i.scrollLeft+Li(e),l=-i.scrollTop;return ot(s).direction==="rtl"&&(n+=K(t.clientWidth,s.clientWidth)-r),{width:r,height:a,x:n,y:l}}function Wa(e,t){let i=it(e),s=ct(e),r=i.visualViewport,a=s.clientWidth,n=s.clientHeight,l=0,o=0;if(r){a=r.width,n=r.height;let u=$e();(!u||u&&t==="fixed")&&(l=r.offsetLeft,o=r.offsetTop)}return{width:a,height:n,x:l,y:o}}function Ha(e,t){let i=It(e,!0,t==="fixed"),s=i.top+e.clientTop,r=i.left+e.clientLeft,a=ht(e)?Yt(e):ut(1),n=e.clientWidth*a.x,l=e.clientHeight*a.y,o=r*a.x,u=s*a.y;return{width:n,height:l,x:o,y:u}}function hr(e,t,i){let s;if(t==="viewport")s=Wa(e,i);else if(t==="document")s=Ba(ct(e));else if(nt(t))s=Ha(t,i);else{let r=pr(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Pt(s)}function mr(e,t){let i=xt(e);return i===t||!nt(i)||Ot(i)?!1:ot(i).position==="fixed"||mr(i,t)}function Ua(e,t){let i=t.get(e);if(i)return i;let s=Ut(e,[],!1).filter(l=>nt(l)&&Lt(l)!=="body"),r=null,a=ot(e).position==="fixed",n=a?xt(e):e;for(;nt(n)&&!Ot(n);){let l=ot(n),o=Ue(n);!o&&l.position==="fixed"&&(r=null),(a?!o&&!r:!o&&l.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||$t(n)&&!o&&mr(e,n))?s=s.filter(d=>d!==n):r=l,n=xt(n)}return t.set(e,s),s}function $a(e){let{element:t,boundary:i,rootBoundary:s,strategy:r}=e,n=[...i==="clippingAncestors"?se(t)?[]:Ua(t,this._c):[].concat(i),s],l=n[0],o=n.reduce((u,d)=>{let p=hr(t,d,r);return u.top=K(p.top,u.top),u.right=_t(p.right,u.right),u.bottom=_t(p.bottom,u.bottom),u.left=K(p.left,u.left),u},hr(t,l,r));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function Ya(e){let{width:t,height:i}=fr(e);return{width:t,height:i}}function za(e,t,i){let s=ht(t),r=ct(t),a=i==="fixed",n=It(e,!0,a,t),l={scrollLeft:0,scrollTop:0},o=ut(0);if(s||!s&&!a)if((Lt(t)!=="body"||$t(r))&&(l=re(t)),s){let m=It(t,!0,a,t);o.x=m.x+t.clientLeft,o.y=m.y+t.clientTop}else r&&(o.x=Li(r));let u=r&&!s&&!a?br(r,l):ut(0),d=n.left+l.scrollLeft-o.x-u.x,p=n.top+l.scrollTop-o.y-u.y;return{x:d,y:p,width:n.width,height:n.height}}function Mi(e){return ot(e).position==="static"}function dr(e,t){if(!ht(e)||ot(e).position==="fixed")return null;if(t)return t(e);let i=e.offsetParent;return ct(e)===i&&(i=i.ownerDocument.body),i}function gr(e,t){let i=it(e);if(se(e))return i;if(!ht(e)){let r=xt(e);for(;r&&!Ot(r);){if(nt(r)&&!Mi(r))return r;r=xt(r)}return i}let s=dr(e,t);for(;s&&lr(s)&&Mi(s);)s=dr(s,t);return s&&Ot(s)&&Mi(s)&&!Ue(s)?i:s||ur(e)||i}var Ga=async function(e){let t=this.getOffsetParent||gr,i=this.getDimensions,s=await i(e.floating);return{reference:za(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function ja(e){return ot(e).direction==="rtl"}var Xa={convertOffsetParentRelativeRectToViewportRelativeRect:qa,getDocumentElement:ct,getClippingRect:$a,getOffsetParent:gr,getElementRects:Ga,getClientRects:Va,getDimensions:Ya,getScale:Yt,isElement:nt,isRTL:ja};function vr(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ka(e,t){let i=null,s,r=ct(e);function a(){var l;clearTimeout(s),(l=i)==null||l.disconnect(),i=null}function n(l,o){l===void 0&&(l=!1),o===void 0&&(o=1),a();let u=e.getBoundingClientRect(),{left:d,top:p,width:m,height:y}=u;if(l||t(),!m||!y)return;let b=ie(p),h=ie(r.clientWidth-(d+m)),k=ie(r.clientHeight-(p+y)),v=ie(d),S={rootMargin:-b+"px "+-h+"px "+-k+"px "+-v+"px",threshold:K(0,_t(1,o))||1},w=!0;function _(E){let T=E[0].intersectionRatio;if(T!==o){if(!w)return n();T?n(!1,T):s=setTimeout(()=>{n(!1,1e-7)},1e3)}T===1&&!vr(u,e.getBoundingClientRect())&&n(),w=!1}try{i=new IntersectionObserver(_,{...S,root:r.ownerDocument})}catch{i=new IntersectionObserver(_,S)}i.observe(e)}return n(!0),a}function yr(e,t,i,s){s===void 0&&(s={});let{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:n=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:o=!1}=s,u=Pi(e),d=r||a?[...u?Ut(u):[],...Ut(t)]:[];d.forEach(v=>{r&&v.addEventListener("scroll",i,{passive:!0}),a&&v.addEventListener("resize",i)});let p=u&&l?Ka(u,i):null,m=-1,y=null;n&&(y=new ResizeObserver(v=>{let[f]=v;f&&f.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=y)==null||S.observe(t)})),i()}),u&&!o&&y.observe(u),y.observe(t));let b,h=o?It(e):null;o&&k();function k(){let v=It(e);h&&!vr(h,v)&&i(),h=v,b=requestAnimationFrame(k)}return i(),()=>{var v;d.forEach(f=>{r&&f.removeEventListener("scroll",i),a&&f.removeEventListener("resize",i)}),p?.(),(v=y)==null||v.disconnect(),y=null,o&&cancelAnimationFrame(b)}}var wr=sr;var xr=rr,Ar=ir,Sr=ar;var _r=(e,t,i)=>{let s=new Map,r={platform:Xa,...i},a={...r.platform,_c:s};return er(e,t,{...r,platform:a})};var z=class extends F{boot({options:t}){if(t({reference:null,auto:!0,position:"bottom start",gap:"5",offset:"0",matchWidth:!1,crossAxis:!1}),this.options().reference===null||this.options().position===null)return;let[i,s]=Qa(this.el),r=Ja(this.el,this.options().reference,i,{position:this.options().position,gap:this.options().gap,offset:this.options().offset,matchWidth:this.options().matchWidth,crossAxis:this.options().crossAxis}),a=()=>{};this.reposition=(...n)=>{this.options().auto?a=yr(this.options().reference,this.el,r):r(null,...n)},this.cleanup=()=>{a(),s()}}};function Ja(e,t,i,{position:s,offset:r,gap:a,matchWidth:n,crossAxis:l}){return(o,u,d)=>{_r(t,e,{placement:Za(s),middleware:[wr({mainAxis:Number(a),alignmentAxis:Number(r)}),Ar(),xr({padding:5,crossAxis:l}),Sr({padding:5,apply({rects:p,elements:m,availableHeight:y}){n&&Object.assign(m.floating.style,{width:`${p.reference.width}px`}),m.floating.style.maxHeight=y>=m.floating.scrollHeight?"":`${y}px`}})]}).then(({x:p,y:m})=>{i(u||p,d||m)})}}function Za(e){return e.split(" ").join("-")}function Qa(e){let t=(a,n)=>{Object.assign(e.style,{position:"absolute",overflowY:"auto",left:`${a}px`,top:`${n}px`,right:"auto",bottom:"auto"})},i,s,r=new MutationObserver(()=>t(i,s));return[(a,n)=>{i=a,s=n,r.disconnect(),t(i,s),r.observe(e,{attributeFilter:["style"]})},()=>{r.disconnect()}]}var Oi=class extends D{boot(){let t=this.trigger(),i=this.overlay();if(t){if(!i)return console.warn("ui-dropdown: no [popover] overlay found",this)}else return console.warn("ui-dropdown: no trigger element found",this);if(this._disabled=this.hasAttribute("disabled"),this._controllable=new I(this),i._popoverable=new et(i),i._anchorable=new z(i,{reference:t,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),i._popoverable.onChange(()=>{i._popoverable.getState()?i._anchorable.reposition():i._anchorable.cleanup()}),["ui-menu","ui-context"].includes(i.localName)){let{lock:a,unlock:n}=pt();i._popoverable.onChange(()=>{i._popoverable.getState()?a():n()})}this._controllable.initial(a=>i._popoverable.setState(a)),this._controllable.getter(()=>i._popoverable.getState());let s=O();this._controllable.setter(a=>i._popoverable.setState(a)),i._popoverable.onChange(s(()=>this._controllable.dispatch())),this.hasAttribute("hover")&&Vt(t,i,{gain(){i._popoverable.setState(!0)},lose(){i._popoverable.setState(!1)},focusable:!0}),x(t,"click",()=>i._popoverable.toggle()),i._popoverable.getState()?(c(this,"data-open",""),c(t,"data-open",""),c(i,"data-open","")):(A(this,"data-open"),A(t,"data-open"),A(i,"data-open")),i._popoverable.onChange(()=>{i._popoverable.getState()?(c(this,"data-open",""),c(t,"data-open",""),c(i,"data-open","")):(A(this,"data-open"),A(t,"data-open"),A(i,"data-open"))});let r=q(i,"dropdown");c(t,"aria-haspopup","true"),c(t,"aria-controls",r),c(t,"aria-expanded",i._popoverable.getState()?"true":"false"),i._popoverable.onChange(()=>{c(t,"aria-expanded",i._popoverable.getState()?"true":"false")}),i._popoverable.onChange(()=>{setTimeout(()=>i._popoverable.getState()?i.onPopoverShow?.():i.onPopoverHide?.())})}trigger(){return this.querySelector("button")}overlay(){return this.lastElementChild?.matches("[popover]")&&this.lastElementChild}};C("dropdown",Oi);var g=class e{constructor(t,i,s=1){this._date=new Date(Date.UTC(t,i-1,s))}isBetween(t,i){return!t&&!i?!0:t?i?this._date>=t._date&&this._date<=i._date:this._date>=t._date:this._date<=i._date}isSameDay(t){return t?this._date.getUTCDate()===t._date.getUTCDate()&&this._date.getUTCMonth()===t._date.getUTCMonth()&&this._date.getUTCFullYear()===t._date.getUTCFullYear():!1}isBefore(t){return t?this._date<t._date:!1}isAfter(t){return t?this._date>t._date:!1}incrementDays(t){let i=this.getCopy();return i._date.setUTCDate(i._date.getUTCDate()+t),i}addMonths(t){let i=this.getCopy();return i._date.setUTCMonth(i._date.getUTCMonth()+t),i}addDays(t){let i=this.getCopy();return i._date.setUTCDate(i._date.getUTCDate()+t),i}getYear(){return this._date.getUTCFullYear()}getMonth(){return this._date.getUTCMonth()+1}getPaddedMonth(){return String(this.getMonth()).padStart(2,"0")}getDay(){return this._date.getUTCDate()}getPaddedDay(){return String(this.getDay()).padStart(2,"0")}getDate(){return this._date}getCopy(){return new e(this.getYear(),this.getMonth(),this.getDay())}getDayOfWeek(){return this._date.getUTCDay()}getDaysInMonth(){return new e(this.getYear(),this.getMonth()+1,0).getDay()}getFirstDayOfMonth(){return new e(this.getYear(),this.getMonth(),1).getDayOfWeek()}getWeekNumber(){let t=new Date(Date.UTC(this._date.getUTCFullYear(),0,1)),i=new Date(t);i.setUTCDate(1+(11-t.getUTCDay())%7);let s=new Date(this._date);return s.setUTCDate(this._date.getUTCDate()+(11-this._date.getUTCDay())%7),Math.floor((s.getTime()-i.getTime())/(7*24*60*60*1e3))+1}setDay(t){this._date.setUTCDate(t)}setMonth(t){this._date.setUTCMonth(t-1)}setYear(t){this._date.setUTCFullYear(t)}static fromIsoDateString(t){if(!t)return null;let[i,s,r]=t.split("T")[0]?.split("-")?.map(Number);return new e(i,s,r)}static fromLocalDate(t){return t?new e(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()):null}static fromDate(t){return t?new e(t.getFullYear(),t.getMonth()+1,t.getDate()):null}static fromParts(t,i,s){return new e(t,i,s)}static today(){return e.fromDate(new Date)}toIsoDateString(){return[this.getYear(),this.getPaddedMonth(),this.getPaddedDay()].join("-")}toParts(){return[this.getYear(),this.getMonth(),this.getDay()]}toDate(){return new Date(this.getYear(),this.getMonth()-1,this.getDay())}toFormattedString(t,i){return this.toDate().toLocaleDateString(t,i)}};function kr(e,t,i,s){let r=e.querySelector('template[name="heading"]'),a=e.querySelector('template[name="weekday"]'),n=e.querySelector('template[name="week"]');r&&tn(r,t,i),a&&en(a,t),n&&sn(n,t,i,s)}function tn(e,t,i){J(e,s=>s({slots:{default:new Intl.DateTimeFormat(t.locale,{month:e.hasAttribute("display")?e.getAttribute("display"):"long",year:"numeric",timeZone:"UTC"}).format(new g(i.year,i.month).getDate())}}))}function en(e,t){let i=r=>{if(e.hasAttribute("display"))return new Intl.DateTimeFormat(t.locale,{weekday:e.getAttribute("display")}).format(r);let a=new Intl.DateTimeFormat(t.locale,{weekday:"short"});return["en","es","de","fr","it","pt"].includes(t.locale.split("-")[0])?a.format(r).slice(0,2):a.format(r)},s=Array.from({length:7},(r,a)=>{let n=(a+t.startDay)%7,l=new Date(2024,0,n+7);return i(l)});J(e,r=>s.map(a=>r({slots:{default:a}})))}function sn(e,t,i,s){let r=i.month,a=i.year,n=(new g(a,r).getFirstDayOfMonth()-t.startDay+7)%7,l=new g(a,r).getDaysInMonth(),[o,u]=new g(a,r).addMonths(-1).toParts(),d=new g(o,u).getDaysInMonth(),[p,m]=[[],[]];for(let w=0;w<n;w++){p.push(0);let _=d-n+w+1;m.push(new g(o,u,_).toIsoDateString())}for(let w=1;w<=l;w++)p.push(w),m.push(new g(a,r,w).toIsoDateString());let b=(7-(n+l)%7)%7,[h,k]=new g(a,r).addMonths(1).toParts();for(let w=1;w<=b;w++)p.push(0),m.push(new g(h,k,w).toIsoDateString());if(t.fixedWeeks){let w=Math.ceil(p.length/7),_=t.fixedWeeks,E=_-w;if(E>0)for(let T=0;T<E*7;T++)p.push(0),m.push(g.fromIsoDateString(m[m.length-1]).addDays(1).toIsoDateString());else E<0&&(p.length=_*7,m.length=_*7)}let v=w=>Array.from({length:Math.ceil(w.length/7)},(_,E)=>w.slice(E*7,(E+1)*7)),f=v(p),S=v(m);J(e,w=>f.map((_,E)=>{let T=w(),N=S[E],rt=T.querySelector('template[name="number"]');if(rt){let G=(4-t.startDay+7)%7,at=g.fromIsoDateString(N[G]).getWeekNumber();J(rt,Z=>Z({slots:{default:at}}))}return J(T.querySelector('template[name="day"]'),G=>_.map((at,Z)=>{if(at===0){let tt=g.fromIsoDateString(N[Z]).getDay();return G({slots:{default:tt},attrs:{"data-outside":""}})}let Q=g.fromIsoDateString(N[Z]),j=G({slots:{default:at},attrs:{"data-date":N[Z]}}),ft=s.subtext(Q),$=s.details(Q),mt=s.variant(Q);if([!1,null,void 0].includes(mt)||(j.dataset.dateVariant=mt),![!1,null,void 0].includes(ft)){let X=j.querySelector('template[name="subtext"]');X&&J(X,tt=>tt({slots:{default:ft}}))}if(![!1,null,void 0].includes($)){let X=j.querySelector('template[name="details"]');X&&J(X,tt=>tt({slots:{default:$}}))}return j})),T}))}function Er(e,t,i,s,r,a){let l=((o,u)=>r.lowerBound(()=>g.today().getMonth()===o&&g.today().getYear()===u?g.today():new g(u,o)))(s.month,s.year);e.querySelectorAll("[data-outside]").forEach(o=>{c(o,"disabled",""),c(o,"role","gridcell"),c(o,"aria-hidden","true"),c(o,"aria-disabled","true");let u=o.querySelector("button");u&&c(u,"tabindex","-1"),u&&c(u,"disabled",""),u&&c(u,"aria-disabled","true")}),e.querySelectorAll("[data-date]").forEach(o=>{c(o,"role","gridcell");let u=o.querySelector("button"),d=rn(o);d&&(u?c(u,"aria-label",d.toFormattedString(i.locale,{day:"numeric",month:"long",year:"numeric",weekday:"long"})):c(o,"aria-label",d.toFormattedString(i.locale,{day:"numeric",month:"long",year:"numeric",weekday:"long"})),a.isValid(d)?t?(c(o,"disabled",""),c(o,"aria-disabled","true"),u&&c(u,"disabled","")):(A(o,"disabled"),A(o,"data-unavailable"),A(o,"aria-disabled"),u&&A(u,"disabled")):(c(o,"disabled",""),c(o,"aria-disabled","true"),u&&c(u,"disabled",""),a.isUnavailable(d)&&c(o,"data-unavailable","")),g.today().isSameDay(d)?c(o,"data-today",""):A(o,"data-today",""),r.attributes(o,d),d.isSameDay(l)?u&&c(u,"tabindex","0"):u&&c(u,"tabindex","-1"))})}function J(e,t){if(!e)return;let i=()=>{let r=e.nextElementSibling;for(;r&&r.__hydrated__===!0;){let a=r;r=r.nextElementSibling,a.remove()}};i();let s=t(({slots:r={},attrs:a={}}={})=>{let n=e.content.cloneNode(!0).firstElementChild;return Object.entries(r).forEach(([l,o])=>{(l==="default"?n.querySelectorAll("slot:not([name])"):n.querySelectorAll(`slot[name="${l}"]`)).forEach(d=>d.replaceWith(typeof o=="string"?document.createTextNode(o):o))}),n.querySelectorAll("slot").forEach(l=>l.remove()),Object.entries(a).forEach(([l,o])=>{n.setAttribute(l,o)}),n});return s=Array.isArray(s)?s:[s],s.reverse().forEach(r=>{r.__hydrated__=!0,e.after(r)}),{cleanup:i}}function rn(e){return!e||!e.hasAttribute("data-date")?null:g.fromIsoDateString(e.getAttribute("data-date"))}var M=class{static SELECTION=1;static ACTIVATION=2;static VIEW_CHANGE=3},zt=class{constructor(){this.subscribers=[],this.subscriberTypes=new WeakMap}subscribe(t,i){let s=Array.isArray(t)?t:[t];this.subscribers.push(i),this.subscriberTypes.has(i)||this.subscriberTypes.set(i,[]),this.subscriberTypes.get(i).push(...s)}notify(t){let i=Array.isArray(t)?t:[t];this.subscribers.forEach(s=>{i.length&&!this.subscriberTypes.get(s)?.some(r=>i.includes(r))||s()})}};var U=class{static SINGLE="single";static MULTIPLE="multiple";static RANGE="range"},ze=class e{constructor(t,i,s){this.config=i,this.observable=s,this.selection=t,this.active=null,this.displayResolver=r=>r}setDisplayResolver(t){this.displayResolver=t}select(t){let i=this.selection;this.selection=this.selection.select(t,this.config),this.selection.shouldNotify(i)?this.observable.notify(M.SELECTION):this.observable.notify(M.ACTIVATION)}activate(t){let i=this.active;t?this.active=t:this.active=null,this.selection.activate(t),i!==this.active&&this.observable.notify(M.ACTIVATION)}setValue(t){let i=this.selection;this.selection=this.createSelectionFromValue(t,this.config),this.selection.shouldNotify(i)?this.observable.notify(M.SELECTION):this.observable.notify(M.ACTIVATION)}getValue(){return this.selection.value()}isSelectable(t){return this.selection.selectable(t,this.config)}contains(...t){return this.selection.contains(...t)}hasSelection(){return this.selection.hasSelection()}lowerBound(...t){return this.selection.lowerBound(...t)}upperBound(...t){return this.selection.upperBound(...t)}display(...t){return this.displayResolver(this.selection.display(...t))}attributes(...t){return this.selection.attributes(...t)}createSelectionFromValue(t,i){if(i.mode===U.MULTIPLE){let s=t?t.map(r=>g.fromIsoDateString(r)):[];return new je(s)}else if(i.mode===U.RANGE){let{start:s,end:r,preset:a}=t||{};return a&&Ke[a]&&a!=="custom"?new Xe(a,i):!s&&!r?new oe:r?new le(g.fromIsoDateString(s),g.fromIsoDateString(r)):new Et(g.fromIsoDateString(s))}else return t?new ne(g.fromIsoDateString(t)):new ae}static createFromValueStringAttribute(t,i,s){let r=e.createSelectionFromValueStringAttribute(t,i);return new e(r,i,s)}static createSelectionFromValueStringAttribute(t,i){if(i.mode===U.MULTIPLE){let s=t?t.split(",").map(r=>r.trim()).map(r=>g.fromIsoDateString(r)):[];return new je(s)}else if(i.mode===U.RANGE){if(!t)return new oe;let[s,r]=t.split("/").map(a=>a.trim());return!r&&s&&Ke[s]&&s!=="custom"?new Xe(s,i):(s=g.fromIsoDateString(s),r?(r=g.fromIsoDateString(r),new le(s,r)):new Et(s))}else return t?new ne(g.fromIsoDateString(t)):new ae}},Ge=class{constructor(t,i){this.selectable=t,this.observable=i,this._selection=this.selectable.selection,this.selectable.observable.subscribe(M.SELECTION,()=>{this._blockSync()||this.sync()}),this._blockSync=()=>{}}blockSyncIf(t){this._blockSync=t}sync(){this._selection=this.selectable.selection,this.observable.notify(M.SELECTION)}setValue(t){return this.selectable.setValue(t)}getValue(){return this._selection.value()}isSelectable(t){return this._selection.selectable(t,this.config)}hasSelection(){return this._selection.hasSelection()}display(...t){return this.selectable.displayResolver(this._selection.display(...t))}},At=class{contains(){}shouldNotify(t){return!0}hasSelection(){return!1}lowerBound(t){return ue(t)}upperBound(t){return this.lowerBound(t)}selectable(t,i){return!0}display(){}value(){}activate(){}attributes(t,i){this.contains(i)?(c(t,"data-selected",""),c(t,"aria-selected","true")):(A(t,"data-selected"),c(t,"aria-selected","false"))}},ae=class e extends At{shouldNotify(t){return!(t instanceof e)}hasSelection(){return!1}contains(){return!1}select(t){return new ne(t)}lowerBound(t){return ue(t)}display(t){return""}value(){return null}},ne=class e extends At{constructor(t){super(),this._date=t}hasSelection(){return!0}shouldNotify(t){return!(t instanceof e&&this._date.isSameDay(t._date))}select(t){return this._date.isSameDay(t)?new ae:new e(t)}contains(t){return this._date.isSameDay(t)}lowerBound(){return this._date}display(t){return this._date.toFormattedString(t,{day:"numeric",month:"short",year:"numeric"})}value(){return this._date.toIsoDateString()}},je=class e extends At{constructor(t){super(),this._dates=t}hasSelection(){return this._dates.length>0}shouldNotify(t){return!(t instanceof e&&this._dates.every(i=>t._dates.includes(i))&&t._dates.every(i=>this._dates.includes(i)))}select(t){return this._dates.some(s=>s.isSameDay(t))?new e(this._dates.filter(s=>!s.isSameDay(t))):new e([...this._dates,t])}contains(t){return this._dates.some(i=>i.isSameDay(t))}lowerBound(t){let i=this._dates.sort((s,r)=>s.isBefore(r)?-1:1);return i[i.length-1]||ue(t)}upperBound(t){return this._dates.sort((s,r)=>s.isBefore(r)?-1:1)[0]||ue(t)}display(t){return this._dates.map(i=>i.toFormattedString(t,{day:"numeric",month:"short",year:"numeric"})).join(", ")}value(){return this._dates.map(t=>t.toIsoDateString())}},oe=class e extends At{constructor(){super()}hasSelection(){return!1}shouldNotify(t){return!(t instanceof e||t instanceof Et)}select(t){return new Et(t)}contains(){return!1}lowerBound(t){return ue(t)}display(t){return""}value(){return null}},Et=class e extends At{constructor(t){super(),this._start=t,this._endPreview=null}hasSelection(){return!1}shouldNotify(t){return!1}select(t,i){return t.isBefore(this._start)?new e(t):t.isSameDay(this._start)&&i.minRange>1?new oe:new le(this._start,t)}activate(t){this._endPreview=t}selectable(t,i){if(i.maxRange&&(t.isBefore(this._start)||this._start.addDays(i.maxRange-1).isBefore(t)))return!1;if(i.minRange){if(this._start.isSameDay(t))return!0;if(t.isBefore(this._start)||this._start.addDays(i.minRange-1).isAfter(t))return!1}let s=i.unavailable.filter(a=>a.isAfter(this._start)).sort((a,n)=>a.toDate()-n.toDate())[0],r=i.unavailable.filter(a=>a.isBefore(this._start)).sort((a,n)=>n.toDate()-a.toDate())[0];return t.isAfter(this._start)?!s||t.isBefore(s):t.isBefore(this._start)?!r||t.isAfter(r):!0}contains(t){return t.isSameDay(this._start)}lowerBound(){return this._start}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).format(this._start.getDate())+" -"}value(){return null}attributes(t,i){this._endPreview&&i.isBetween(this._start,this._endPreview)?(c(t,"data-in-range",""),c(t,"aria-selected","true")):(A(t,"data-in-range"),A(t,"aria-selected")),i.isSameDay(this._start)?c(t,"data-selected",""):A(t,"data-selected"),i.isSameDay(this._start)?c(t,"aria-selected","true"):A(t,"aria-selected"),i.isSameDay(this._start)?c(t,"data-start",""):A(t,"data-start"),i.isSameDay(this._endPreview)?c(t,"data-end-preview",""):A(t,"data-end-preview")}},le=class e extends At{constructor(t,i){super(),this._start=t,this._end=i}hasSelection(){return!0}shouldNotify(t){return!(t instanceof e&&this._start.isSameDay(t._start)&&this._end.isSameDay(t._end))}select(t){return new Et(t)}contains(t){return t.isBetween(this._start,this._end)}lowerBound(){return this._start}upperBound(){return this._end}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).formatRange(this._start.getDate(),this._end.getDate()).replaceAll("\u2009"," ")}value(){return{start:this._start.toIsoDateString(),end:this._end.toIsoDateString()}}attributes(t,i){i.isSameDay(this._start)||i.isSameDay(this._end)?c(t,"data-selected",""):A(t,"data-selected"),i.isSameDay(this._start)?c(t,"data-start",""):A(t,"data-start"),i.isSameDay(this._end)?c(t,"data-end",""):A(t,"data-end"),this.contains(i)?(c(t,"data-in-range",""),c(t,"aria-selected","true")):(A(t,"data-in-range"),A(t,"aria-selected"))}},Xe=class e extends At{constructor(t,i){super(),this._preset=t,this._config=i}get _start(){let[t]=Ke[this._preset](this._config);return this._config.min&&t.isBefore(this._config.min)?this._config.min:t}get _end(){let[,t]=Ke[this._preset](this._config);return this._config.max&&t.isAfter(this._config.max)?this._config.max:t}hasSelection(){return!0}shouldNotify(t){return!(t instanceof e&&this._preset===t._preset)}select(t){return new Et(t,this._config)}contains(t){return t.isBetween(this._start,this._end)}lowerBound(){return this._preset==="allTime"?g.today():this._start}upperBound(){return this._preset==="allTime"?g.today():g.today()}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).formatRange(this._start.getDate(),this._end.getDate()).replaceAll("\u2009"," ")}value(){return{start:this._start.toIsoDateString(),end:this._end.toIsoDateString(),preset:this._preset}}attributes(t,i){i.isSameDay(this._start)||i.isSameDay(this._end)?c(t,"data-selected",""):A(t,"data-selected"),i.isSameDay(this._start)?c(t,"data-start",""):A(t,"data-start"),i.isSameDay(this._end)?c(t,"data-end",""):A(t,"data-end"),this.contains(i)?(c(t,"data-in-range",""),c(t,"aria-selected","true")):(A(t,"data-in-range"),A(t,"aria-selected"))}};function ue(e){return typeof e=="function"?e():e}var Ke={today:()=>[g.today(),g.today()],yesterday:()=>{let e=g.today().incrementDays(-1);return[e,e]},thisWeek:e=>{let t=g.today().getCopy().incrementDays(e.startDay-g.today().getDayOfWeek()),i=t.incrementDays(6);return[t,i]},lastWeek:e=>{let t=g.today().incrementDays(e.startDay-(g.today().getDayOfWeek()+7)),i=t.incrementDays(6);return[t,i]},last7Days:()=>{let e=g.today();return[g.today().incrementDays(-6),e]},thisMonth:()=>{let e=g.fromParts(g.today().getYear(),g.today().getMonth(),1),t=g.fromParts(g.today().getYear(),g.today().getMonth(),g.today().getDaysInMonth());return[e,t]},lastMonth:()=>{let e=g.today().getMonth()-1,t=g.today().getYear();e<1&&(e+=12,t--);let i=g.fromParts(t,e,1),s=g.fromParts(t,e,i.getDaysInMonth());return[i,s]},thisQuarter:()=>{let t=Math.floor((g.today().getMonth()-1)/3)*3+1,i=t+2,s=g.fromParts(g.today().getYear(),t,1),r=g.fromParts(g.today().getYear(),i,1),a=g.fromParts(g.today().getYear(),i,r.getDaysInMonth());return[s,a]},lastQuarter:()=>{let t=Math.floor((g.today().getMonth()-4)/3)*3+1,i=t+2,s=g.today().getYear();t<1&&(t+=12,i+=12,s--);let r=g.fromParts(s,t,1),a=g.fromParts(s,i,1),n=g.fromParts(s,i,a.getDaysInMonth());return[r,n]},thisYear:()=>{let e=g.fromParts(g.today().getYear(),1,1),t=g.fromParts(g.today().getYear(),12,31);return[e,t]},lastYear:()=>{let e=g.today().getYear()-1,t=g.fromParts(e,1,1),i=g.fromParts(e,12,31);return[t,i]},last14Days:()=>{let e=g.today();return[g.today().incrementDays(-13),e]},last30Days:()=>{let e=g.today();return[g.today().incrementDays(-29),e]},last3Months:()=>{let e=g.today(),t=g.today().getDay()+1,i=g.today().getMonth()-3,s=g.today().getYear();return i<1&&(i+=12,s--),[g.fromParts(s,i,t),e]},last6Months:()=>{let e=g.today(),t=g.today().getDay()+1,i=g.today().getMonth()-6,s=g.today().getYear();return i<1&&(i+=12,s--),[g.fromParts(s,i,t),e]},yearToDate:()=>{let e=g.fromParts(g.today().getYear(),1,1),t=g.today();return[e,t]},allTime:e=>{if(!e.min)throw new Error("Min date is required for allTime preset");let t=e.min,i=g.today();return[t,i]}};var Je=class{constructor(t,i,s,r){this.month=t,this.year=i,this.config=s,this.observable=r}generateOffsetState(t){return new Ii(this,t)}canNavigatePrevious(){let[t,i]=new g(this.year,this.month).addMonths(-1).toParts();return!(this.config.min&&g.fromParts(t,i).isBefore(this.config.min))}canNavigateNext(){let[t,i]=new g(this.year,this.month).addMonths(this.config.months).toParts();return!(this.config.max&&g.fromParts(t,i).isAfter(this.config.max))}nextMonth(){this.canNavigateNext()&&this.adjustMonth(1)}previousMonth(){this.adjustMonth(-1)}setMonth(t){t&&(this.config.min&&g.fromParts(this.year,t).isBefore(this.config.min)||this.config.max&&g.fromParts(this.year,t).isAfter(this.config.max)||(this.month=t,this.observable.notify(M.VIEW_CHANGE)))}setYear(t){this.year=t,this.observable.notify(M.VIEW_CHANGE)}setDate(t){this.setMonth(t.getMonth()),this.setYear(t.getYear()),this.observable.notify(M.VIEW_CHANGE)}adjustMonth(t){let[i,s]=new g(this.year,this.month).addMonths(t).toParts();this.config.min&&g.fromParts(i,s).isBefore(this.config.min)||this.config.max&&g.fromParts(i,s).isAfter(this.config.max)||([this.month,this.year]=[s,i],this.observable.notify(M.VIEW_CHANGE))}},Ii=class{constructor(t,i=0){this.offset=i,this.viewState=t}get month(){let[,t]=new g(this.viewState.year,this.viewState.month).addMonths(this.offset).toParts();return t}get year(){let[t]=new g(this.viewState.year,this.viewState.month).addMonths(this.offset).toParts();return t}};var Ze=class{constructor(t,i,s){this.min=s.min,this.max=s.max,this.unavailable=s.unavailable,this.selectable=t,this.metadata=i}isBetweenMinMax(t){return t.isBetween(this.min,this.max)}isUnavailable(t){return this.unavailable.some(i=>i.isSameDay(t))||this.metadata.unavailable(t)}isBlocked(t){return!this.selectable.isSelectable(t)}isValid(t){return this.isBetweenMinMax(t)&&!this.isUnavailable(t)&&!this.isBlocked(t)}};var Qe=class{constructor(t){this.metadata={},this.observable=t}resetFromJSON(t){this.reset(JSON.parse(t))}appendFromJSON(t){this.append(JSON.parse(t))}append(t){this.metadata={...this.metadata,...t},this.observable.notify(M.VIEW_CHANGE)}reset(t){this.metadata=t,this.observable.notify(M.VIEW_CHANGE)}get(t){return this.metadata[t.toIsoDateString()]}has(t){return this.metadata[t.toIsoDateString()]!==void 0}subtext(t){return this.metadata[t.toIsoDateString()]?.subtext}details(t){return this.metadata[t.toIsoDateString()]?.details}variant(t){return this.metadata[t.toIsoDateString()]?.variant}unavailable(t){return!!this.metadata[t.toIsoDateString()]?.unavailable}};var Ni=class extends D{boot(){let t=this.closest("ui-date-picker")||this,[i,s]=Xs(t,"months",1);this.observable=new zt;let r=t.hasAttribute("locale")?t.getAttribute("locale"):lt();this.config={mode:t.getAttribute("mode")==="range"?U.RANGE:t.hasAttribute("multiple")?U.MULTIPLE:U.SINGLE,months:parseInt(i),min:t.hasAttribute("min")?t.getAttribute("min")==="today"?g.today():g.fromIsoDateString(t.getAttribute("min")):null,max:t.hasAttribute("max")?t.getAttribute("max")==="today"?g.today():g.fromIsoDateString(t.getAttribute("max")):null,maxRange:t.hasAttribute("max-range")?parseInt(t.getAttribute("max-range")):null,minRange:t.hasAttribute("min-range")?parseInt(t.getAttribute("min-range")):null,startDay:t.hasAttribute("start-day")?parseInt(t.getAttribute("start-day")):(new Intl.Locale(r).weekInfo?.firstDay||7)%7,unavailable:t.hasAttribute("unavailable")?t.getAttribute("unavailable").split(",").map(l=>g.fromIsoDateString(l.trim())):[],locale:r,fixedWeeks:t.hasAttribute("fixed-weeks")?6:null},s(l=>{this.config.months=parseInt(l),this.observable.notify(M.VIEW_CHANGE)}),this.selectable=ze.createFromValueStringAttribute(t.getAttribute("value"),this.config,this.observable),this.metadata=new Qe(this.observable),this.validator=new Ze(this.selectable,this.metadata,this.config);let a=t.hasAttribute("open-to")?g.fromIsoDateString(t.getAttribute("open-to")):this.selectable.lowerBound(()=>g.today());if(this.viewState=new Je(a.getMonth(),a.getYear(),this.config,this.observable),this._disableable=new R(this),!this.hasAttribute("static")){let{enable:l,disable:o}=an(this,this.selectable,this.viewState,this.validator);this._disableable.onInitAndChange(u=>{u?o():l()})}this._controllable=new I(this);let n=O();this._controllable.initial(l=>l&&this.selectable.setValue(l)),this._controllable.getter(()=>this.selectable.getValue()),this._controllable.setter(n(l=>{this.selectable.setValue(l)})),this.observable.subscribe(M.SELECTION,n(()=>{this.dispatchEvent(new Event("select",{bubbles:!1,cancelable:!0})),this._controllable.dispatch()})),this.observable.subscribe(M.SELECTION,()=>{this.anchorSelection()}),this.observable.subscribe(M.VIEW_CHANGE,()=>{this.dispatchEvent(new Event("navigate",{bubbles:!1,cancelable:!0}))}),queueMicrotask(()=>{this.closest("ui-date-picker")?.bootWithCalendar(this)})}navigateNext(){this.viewState.nextMonth()}navigatePrevious(){this.viewState.previousMonth()}anchorSelection(){let t=document.activeElement;this.contains(t)&&t.closest("[data-date]")!==null||this.viewState.setDate(this.selectable.lowerBound(g.today()))}appendMetadata(t){this.metadata.append(t)}resetMetadata(t={}){this.metadata.reset(t)}visibleDateRange(){return[g.fromParts(this.viewState.year,this.viewState.month,1).toIsoDateString(),g.fromParts(this.viewState.year,this.viewState.month+1,0).toIsoDateString()]}},Ri=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,Bt(this,()=>this._disableable.isDisabled(),()=>t.navigatePrevious());let i=()=>{t.viewState.canNavigatePrevious()&&!this._disableable.isDisabled()?A(this,"disabled"):c(this,"disabled","")};t.observable.subscribe(M.VIEW_CHANGE,i),this._disableable.onInitAndChange(()=>{i()})}},Fi=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,Bt(this,()=>this._disableable.isDisabled(),()=>t.navigateNext());let i=()=>{t.viewState.canNavigateNext()&&!this._disableable.isDisabled()?A(this,"disabled"):c(this,"disabled","")};t.observable.subscribe(M.VIEW_CHANGE,i),this._disableable.onInitAndChange(()=>{i()})}},qi=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.validator=t.validator;let i=this.querySelector("select"),s=this.hasAttribute("display")?this.getAttribute("display"):"long";if(i)this.renderSelectOptions(i,s),i.value=this.viewState.month,i.addEventListener("change",this._disableable.enabled(()=>{this.viewState.setMonth(parseInt(i.value))})),t.observable.subscribe(M.VIEW_CHANGE,()=>{this.renderSelectOptions(i,s),i.value=this.viewState.month}),this._disableable.onInitAndChange(r=>{r?c(i,"disabled",""):A(i,"disabled")});else{let r=()=>this.textContent=new Intl.DateTimeFormat(this.config.locale,{month:this.hasAttribute("display")?this.getAttribute("display"):"long",timeZone:"UTC"}).format(new g(this.offsetState.year,this.offsetState.month).getDate());r(),this.viewState.observable.subscribe(M.VIEW_CHANGE,()=>r())}}renderSelectOptions(t,i){let r=Array.from({length:12},(a,n)=>n+1).map(a=>{let n=new g(this.viewState.year,a),l=new g(this.viewState.year,a+1,0);return!this.validator.isBetweenMinMax(n)&&!this.validator.isBetweenMinMax(l)?null:{month:a,label:new Intl.DateTimeFormat(this.config.locale,{month:i,timeZone:"UTC"}).format(new g(2024,a).getDate())}}).filter(Boolean);J(t.querySelector("template"),a=>r.map(n=>{let l=a({slots:{default:n.label}});return l.setAttribute("value",n.month),l}))}},Vi=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset);let i=this.querySelector("select");if(i)this.renderSelectOptions(i),i.value=this.viewState.year,i.addEventListener("change",this._disableable.enabled(()=>{this.viewState.setYear(parseInt(i.value))})),t.observable.subscribe(M.VIEW_CHANGE,()=>{i.value=this.viewState.year}),this._disableable.onInitAndChange(s=>{s?c(i,"disabled",""):A(i,"disabled")});else{let s=()=>this.textContent=new Intl.DateTimeFormat(this.config.locale,{year:this.hasAttribute("display")?this.getAttribute("display"):"numeric",timeZone:"UTC"}).format(new g(this.offsetState.year,this.offsetState.month).getDate());s(),this.viewState.observable.subscribe(M.VIEW_CHANGE,()=>s())}}renderSelectOptions(t){let i=100,s=10,r=new Date().getFullYear(),a=Array.from({length:i+s+1},(n,l)=>r-i+l);J(t.querySelector("template"),n=>a.map(l=>n({slots:{default:l}})))}},Bi=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.selectable=t.selectable,this.observable=t.observable,this.metadata=t.metadata,this.validator=t.validator,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.monthEls=[],this.renderMonths();let i=()=>this.monthEls.forEach(a=>kr(a,this.config,a.offsetState,this.metadata)),s=()=>this.monthEls.forEach(a=>Er(a,this._disableable.isDisabled(),this.config,a.offsetState,this.selectable,this.validator));i(),s();let r=this.config.months;this.viewState.observable.subscribe(M.VIEW_CHANGE,()=>{r!==this.config.months&&(r=this.config.months,this.renderMonths()),i(),s()}),this.observable.subscribe([M.SELECTION,M.ACTIVATION],()=>{s()}),this._disableable.onChange(()=>s())}renderMonths(){let t=this.querySelector('template:not([name]), template[name="month"]');J(t,i=>{let s=Array.from({length:this.config.months}).map((r,a)=>a);return this.monthEls=s.map(r=>{let a=this.viewState.generateOffsetState(r),n=i({attrs:{"data-month":""}});n.offsetState=a;let l=n.querySelector("thead")?.set;return c(n,"role","grid"),l&&c(l,"aria-hidden","true"),n}),this.monthEls})}},Wi=class extends D{boot(){let t=this.closest("ui-calendar, ui-date-picker");this._disableable=t._disableable,this.behavior=this.hasAttribute("behavior")?this.getAttribute("behavior"):"auto",Bt(this,()=>this._disableable.isDisabled(),()=>this.navigateAndSelectToday()),this._disableable.onInitAndChange(s=>{s?c(this,"disabled",""):A(this,"disabled")});let i=this.querySelector("template");i&&J(i,s=>s({slots:{default:g.today().getDay()}}))}navigateAndSelectToday(){let t=this.closest("ui-calendar, ui-date-picker"),i=()=>{let r=t.viewState,a=g.today();return r.year===a.getYear()&&r.month===a.getMonth()};(this.behavior==="select"||this.behavior==="auto"&&i())&&(t.config.mode===U.RANGE?t.selectable.setValue({start:g.today().toIsoDateString(),end:g.today().toIsoDateString()}):t.config.mode===U.MULTIPLE?t.selectable.setValue([g.today().toIsoDateString()]):t.selectable.setValue(g.today().toIsoDateString())),t.viewState.setMonth(g.today().getMonth()),t.viewState.setYear(g.today().getYear())}},Hi=class extends D{boot(){let t=this.closest("ui-calendar");if(this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.selectable=t.selectable,this.observable=t.observable,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.config.mode!==U.RANGE)throw"Presets can only be used with range calendars";let i=this.firstElementChild;if(i){let s=r=>{if(i._selectable instanceof Y){let a=i._selectable.findByValue(r);return a?a?.el?.textContent:null}else if(i instanceof HTMLSelectElement)return i.querySelector(`option[value="${r}"]`)?.textContent;return null};this.selectable.setDisplayResolver(r=>{let a=this.selectable.getValue()?.preset||"";if(a){let n=s(a);if(n)return n}return r}),i.value=this.selectable.getValue()?.preset||"custom",i.addEventListener("change",this._disableable.enabled(()=>{if(["","custom"].includes(i.value)){let{start:r,end:a}=this.selectable.getValue()||{};r&&a&&this.selectable.setValue({start:r,end:a})}else this.selectable.setValue({preset:i.value})})),this.observable.subscribe(M.SELECTION,()=>{let r=this.selectable.getValue();i.value=r?.preset||"custom"}),this._disableable.onInitAndChange(r=>{r?c(i,"disabled",""):A(i,"disabled")})}}},Ui=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.selectable=t.selectable,this.observable=t.observable,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset);let[i,s]=this.querySelectorAll("input");this.config.mode===U.RANGE?zi(i,s,t):Yi(i,t)}};P(({css:e})=>e`
    ui-calendar-preset,
    ui-calendar-previous,
    ui-calendar-next {
        display: block;
        user-select: none;
    }
`);C("calendar",Ni);C("calendar-today",Wi);C("calendar-presets",Hi);C("calendar-previous",Ri);C("calendar-inputs",Ui);C("calendar-next",Fi);C("calendar-months",Bi);C("calendar-month",qi);C("calendar-year",Vi);function an(e,t,i,s){let r=!1,a=e.hasAttribute("readonly");return x(e,"click",n=>{if(r||a)return;let l=n.target.closest("[data-date]");if(!l)return;let o=Gt(l);s.isValid(o)&&t.select(o)}),x(e,"mouseover",n=>{if(r||a)return;let l=n.target.closest("[data-date]");if(!l)return;let o=Gt(l);s.isValid(o)&&t.activate(o)}),x(e,"mouseout",()=>{r||a||t.activate(null)}),x(e,"focusin",n=>{if(r||a)return;let l=n.target.closest("[data-date]");if(!l)return;let o=Gt(l);s.isValid(o)&&t.activate(o)}),x(e,"keydown",n=>{if(r)return;let l=n.target.closest("[data-date]");if(!l)return;let o=!0,u,d=Gt(l),p=m=>{let y=d.getCopy(),b=Math.sign(m),h=366;for(y.setDay(y.getDay()+m);!s.isValid(y)&&h>0;)y.setDay(y.getDay()+b),h--;d=y};switch(n.key){case"ArrowRight":u="forward",p(1);break;case"ArrowLeft":u="backward",p(-1);break;case"ArrowUp":u="backward",p(-7);break;case"ArrowDown":u="forward",p(7);break;case"Home":i.previousMonth();break;case"End":i.nextMonth();break;case"PageUp":n.shiftKey,i.previousMonth();break;case"PageDown":n.shiftKey,i.nextMonth();break;default:o=!1}if(o){n.preventDefault(),n.stopPropagation();let m=Array.from(e.querySelectorAll("[data-date]")).find(y=>Gt(y).isSameDay(d));!m&&u&&(u==="forward"?i.nextMonth():i.previousMonth(),m=Array.from(e.querySelectorAll("[data-date]")).find(y=>Gt(y).isSameDay(d))),m?.querySelector("button")?.focus()}}),{enable(){r=!1},disable(){r=!0}}}function Gt(e){return!e||!e.hasAttribute("data-date")?null:g.fromIsoDateString(e.getAttribute("data-date"))}function Yi(e,t){$i(e);let i=O(),s=i(()=>{let r=t.selectable.getValue();e.value=r||""});t.observable.subscribe(M.SELECTION,s),s(),e.addEventListener("change",i(()=>{let r=e.valueAsDate;r?(t.selectable.setValue(g.fromLocalDate(r).toIsoDateString()),t.viewState.setDate(g.fromLocalDate(r))):t.selectable.setValue("")}))}function zi(e,t,i){$i(e),$i(t);let s=O(),r=s(()=>{let{start:n,end:l}=i.selectable.getValue()||{};e.value=n||"",t.value=l||""}),a=s(()=>{let n=e.valueAsDate,l=t.valueAsDate;n&&l?i.selectable.setValue({start:g.fromLocalDate(n).toIsoDateString(),end:g.fromLocalDate(l).toIsoDateString()}):n?i.selectable.setValue({start:g.fromLocalDate(n).toIsoDateString(),end:null}):i.selectable.setValue({start:null,end:null})});i.observable.subscribe(M.SELECTION,r),r(),e.addEventListener("change",a),t.addEventListener("change",a)}function $i(e){x(e,"change",t=>t.stopPropagation()),x(e,"input",t=>t.stopPropagation())}var ce=null;document.addEventListener("mousedown",e=>ce=e);var jt=class extends F{boot({options:t}){t({clickOutside:!0,triggers:[]}),this.onChanges=[],this.state=!1;let i=this.options().triggers;new MutationObserver(r=>{r.forEach(a=>{a.attributeName==="open"&&(this.el.hasAttribute("open")?this.state=!0:this.state=!1)}),this.onChanges.forEach(a=>a())}).observe(this.el,{attributeFilter:["open"]}),this.options().clickOutside&&this.el.addEventListener("click",r=>{if(r.target!==this.el){ce=null;return}ce&&Cr(this.el,ce)&&Cr(this.el,r)&&(this.cancel(),r.preventDefault(),r.stopPropagation()),ce=null}),this.el.hasAttribute("open")&&(this.state=!0,this.hide(),this.show())}onChange(t){this.onChanges.push(t)}show(){this.el.showModal()}hide(){this.el.close()}toggle(){this.state?this.hide():this.show()}cancel(){let t=new Event("cancel",{bubbles:!1,cancelable:!0});this.el.dispatchEvent(t),t.defaultPrevented||this.hide()}getState(){return this.state}setState(t){t?this.show():this.hide()}};function Cr(e,t){let i=e.getBoundingClientRect(),s=t.clientX,r=t.clientY;return!(s>=i.left&&s<=i.right&&r>=i.top&&r<=i.bottom)}var ji=class extends W{bootWithCalendar(t){let i=t.config.mode===U.RANGE;this.calendar=t,this._disableable=new R(this),this.observable=new zt,this.selectable=new Ge(this.calendar.selectable,this.observable),this.viewState=this.calendar.viewState,this.querySelector("ui-selected-date")?.bootWithCalendar(),this.querySelector("ui-date-picker-select")?.bootWithCalendar();let s=this.querySelector("dialog");if(!s)return;let r=this.querySelector("input");r=s?.contains(r)?null:r;let a=Array.from(this.querySelectorAll("input")).find(d=>d!==r);a=s?.contains(a)?null:a,r&&r.addEventListener("click",d=>d.preventDefault()),a&&a.addEventListener("click",d=>d.preventDefault());let n=this.querySelector("button");n=s?.contains(n)?null:n;let l=q(this.calendar,"calendar"),o=r||n;if(!o)return;if(c(o,"role","combobox"),c(o,"aria-controls",l),this.calendar._disableable.onInitAndChange(d=>{d?c(o,"disabled",""):A(o,"disabled")}),this._dialogable=new jt(s,{clickOutside:!this.hasAttribute("disable-click-outside"),triggers:[n,r,a].filter(Boolean)}),this._anchorable=new z(s,{reference:o,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),this.querySelectorAll("button").forEach(d=>{d!==o&&(s.contains(d)||(c(d,"aria-controls",l),c(d,"aria-haspopup","combobox"),Dr(d,this._dialogable),x(d,"click",()=>this._dialogable.toggle())))}),nn(this,o,s,this._dialogable,this._anchorable),Dr(o,this._dialogable),un(this,this._dialogable),on(o,this._dialogable),cn(this,this.calendar.config.mode,this.observable,this.selectable,this._dialogable),i&&s&&r&&a)Gi(r),Gi(a),zi(r,a,this);else if(s&&r){let d=r;Gi(d),Yi(d,this)}else s&&ln(n,this._dialogable);this._controllable=new I(this);let u=O();this._controllable.initial(d=>d&&this.selectable.setValue(d)),this._controllable.getter(()=>this.selectable.getValue()),this._controllable.setter(u(d=>this.selectable.setValue(d))),this.observable.subscribe(M.SELECTION,u(()=>{this.dispatchEvent(new Event("select",{bubbles:!1,cancelable:!0})),this._controllable.dispatch()})),this.observable.subscribe(M.VIEW_CHANGE,()=>{this.dispatchEvent(new Event("navigate",{bubbles:!1,cancelable:!0}))})}input(){return this.querySelector("input")}clear(){this.selectable.setValue(null)}open(){this._dialogable.setState(!0)}close(){this._dialogable.setState(!1)}},Xi=class extends D{bootWithCalendar(){if(this.picker=this.closest("ui-date-picker"),this.querySelectorAll("[data-appended]").forEach(t=>t.remove()),!this.querySelector('template[name="date"]')){let t=document.createElement("template");t.setAttribute("name","date"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),date:this.querySelector('template[name="date"]')},this.picker.observable.subscribe(M.SELECTION,()=>{this.render(this.picker)}),this.render(this.picker)}render(t){if(this.templates.placeholder?.clearPlaceholder?.(),this.templates.date?.clearDate?.(),t.selectable.hasSelection()){let{cleanup:i}=J(this.templates.date,s=>s({slots:{default:t.selectable.display()}}));this.templates.date.clearDate=i}else{if(!this.templates.placeholder)return;let{cleanup:i}=J(this.templates.placeholder,s=>s({slots:{}}));this.templates.placeholder.clearPlaceholder=i}}},Ki=class extends D{bootWithCalendar(){this.picker=this.closest("ui-date-picker"),this.picker.selectable.blockSyncIf(()=>this.getBoundingClientRect().width>0),Bt(this,()=>this.picker._disableable.isDisabled(),()=>{this.picker.selectable.sync(),this.picker._dialogable.setState(!1)})}};C("date-picker",ji);C("date-picker-select",Ki);C("selected-date",Xi);P(({css:e})=>e`ui-date-picker { display: block; }`);P(({css:e})=>e`
/* For Chrome, Safari, Edge */
ui-date-picker input[type="date"]::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
}
`);function Dr(e,t){c(e,"aria-haspopup","listbox");let i=()=>{c(e,"aria-expanded",t.getState()?"true":"false"),t.getState()?c(e,"data-open",""):A(e,"data-open","")};t.onChange(()=>{i()}),i()}function nn(e,t,i,s,r){let a=()=>{Array.from([e,i]).forEach(n=>{s.getState()?c(n,"data-open",""):A(n,"data-open","")}),s.getState()&&r.reposition()};s.onChange(()=>a()),a(),s.onChange(()=>{s.getState()?e.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):e.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function on(e,t){x(e,"keydown",i=>{["ArrowDown","ArrowUp","Escape"].includes(i.key)&&(i.key==="ArrowDown"||i.key==="ArrowUp"?t.getState()||(t.setState(!0),i.preventDefault(),i.stopImmediatePropagation()):i.key==="Escape"&&t.getState()&&t.setState(!1))})}function ln(e,t){x(e,"click",()=>{t.setState(!t.getState())})}function Gi(e){x(e,"focus",()=>e.select())}function un(e,t){let{lock:i,unlock:s}=pt();t.onChange(()=>{t.getState()?i():s()})}function cn(e,t,i,s,r){let a=t!==U.MULTIPLE;if(e.hasAttribute("close")){let n=e.getAttribute("close");a=n.split(" ").includes("auto"),n==="manual"&&(a=!1)}a&&i.subscribe(M.SELECTION,()=>{s.hasSelection()&&r.setState(!1)})}var Ji=class extends D{boot(){let t=this.trigger(),i=this.overlay();this._disabled=this.hasAttribute("disabled"),this._popoverable=new et(i),this._anchorable=new z(i,{reference:t,auto:!1,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0});let{lock:s,unlock:r}=pt();this._popoverable.onChange(()=>{this._popoverable.getState()?s():r()}),x(t,"contextmenu",a=>{a.preventDefault(),this._anchorable.reposition(a.pageX,a.pageY),this._popoverable.setState(!0),this.hasAttribute("detail")&&c(i,"data-detail",this.getAttribute("detail"))}),this.hasAttribute("detail")&&c(i,"data-detail","")}trigger(){return this.firstElementChild}overlay(){if(this.hasAttribute("target")){let t=this.getAttribute("target");return document.getElementById(t)}else return this.lastElementChild.matches("[popover]")&&this.lastElementChild}};C("context",Ji);var he=class extends bt{groupOfType=H;boot({options:t}){t({wrap:!1,filter:!1}),this.onChanges=[]}onChange(t){this.onChanges.push(t)}activated(t){this.onChanges.forEach(i=>i())}activateFirst(){this.filterAwareWalker().first()?.use(H).activate()}activateBySearch(t){this.filterAwareWalker().find(s=>s.textContent.toLowerCase().trim().startsWith(t.toLowerCase()))?.use(H).activate()}activateSelectedOrFirst(t){if(!t||(s=>s.matches("ui-option")?getComputedStyle(s).display==="none":!1)(t)){this.filterAwareWalker().first()?.use(H).activate();return}t?.use(H).activate()}activateActiveOrFirst(){let t=this.getActive();if(!t){this.filterAwareWalker().first()?.use(H).activate();return}t?.use(H).activate()}activateActiveOrLast(){let t=this.getActive();if(!t){this.filterAwareWalker().last()?.use(H).activate();return}t?.use(H).activate()}activatePrev(){let t=this.getActive();if(!t){this.filterAwareWalker().last()?.use(H).activate();return}let i;this.options.wrap?i=this.filterAwareWalker().prevOrLast(t):i=this.filterAwareWalker().prev(t),i?.use(H).activate()}activateNext(){let t=this.getActive();if(!t){this.filterAwareWalker().first()?.use(H).activate();return}let i;this.options.wrap?i=this.filterAwareWalker().nextOrFirst(t):i=this.filterAwareWalker().next(t),i?.use(H).activate()}getActive(){return this.walker().find(t=>t.use(H).isActive())}clearActive(){this.getActive()?.use(H).deactivate()}filterAwareWalker(){let t=i=>i.matches("ui-option")?getComputedStyle(i).display==="none":!1;return B(this.el,(i,{skip:s,reject:r})=>{if(i[this.constructor.name]&&i!==this.el)return r();if(!i[this.groupOfType.name])return s();if(i.hasAttribute("disabled")||t(i))return r()})}},H=class e extends F{groupedByType=he;mount(){this.el.addEventListener("mouseenter",()=>{this.activate()}),this.el.addEventListener("mouseleave",()=>{this.deactivate()})}activate(){this.group()&&this.group().walker().each(t=>t.use(e).deactivate(!1)),c(this.el,"data-active",""),this.el.scrollIntoView({block:"nearest"}),this.group()&&this.group().activated(this.el)}deactivate(t=!0){A(this.el,"data-active"),t&&this.group()&&this.group().activated(this.el)}isActive(){return this.el.hasAttribute("data-active")}};var de=class extends bt{groupOfType=St;boot({options:t}){t({}),this.onChanges=[],this.lastSearch=""}onChange(t){this.onChanges.push(t)}filter(t){t===""?this.walker().each(i=>{i.use(St).unfilter()}):this.walker().each(i=>{this.matches(i,t)?i.use(St).unfilter():i.use(St).filter()}),this.lastSearch!==t&&this.onChanges.forEach(i=>i()),this.lastSearch=t}matches(t,i){return t.textContent.toLowerCase().trim().includes(i.toLowerCase().trim())}hasResults(){return this.walker().some(t=>!t.use(St).isFiltered())}},St=class extends F{groupedByType=de;boot({options:t}){t({mirror:null,keep:!1}),this.onChanges=[]}filter(){this.options().keep||(c(this.el,"data-hidden",""),this.options().mirror&&c(this.options().mirror,"data-hidden",""))}unfilter(){A(this.el,"data-hidden"),this.options().mirror&&A(this.options().mirror,"data-hidden","")}isFiltered(){return this.el.hasAttribute("data-hidden")}};var dt=class extends bt{groupOfType=V;boot({options:t}){t({wrap:!1,ensureTabbable:!0})}mount(){this.options().ensureTabbable&&this.ensureTabbable()}focusFirst(){let t;t=t||this.walker().find(i=>i.hasAttribute("autofocus")),t=t||this.walker().find(i=>i.getAttribute("tabindex")==="0"),t=t||this.walker().find(i=>i.getAttribute("tabindex")==="-1"),t=t||this.walker().find(i=>Gs(i)),t?.focus()}focusPrev(){this.moveFocus(t=>this.options().wrap?this.walker().prevOrLast(t):this.walker().prev(t))}focusNext(){this.moveFocus(t=>this.options().wrap?this.walker().nextOrFirst(t):this.walker().next(t))}focusBySearch(t){let i=this.walker().find(s=>s.textContent.toLowerCase().trim().startsWith(t.toLowerCase()));i?.use(V).tabbable(),i?.use(V).focus()}moveFocus(t){let i=this.walker().find(r=>r.use(V).isTabbable());t(i)?.use(V).focus()}ensureTabbable(){this.walker().findOrFirst(t=>{t.use(V).isTabbable()})?.use(V).tabbable()}wipeTabbables(){this.walker().each(t=>{t.use(V).untabbable()})}untabbleOthers(t){this.walker().each(i=>{i!==t&&i.use(V).untabbable()})}walker(){return B(this.el,(t,{skip:i,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name])return i();if(t.hasAttribute("disabled"))return s()})}},V=class extends F{groupedByType=dt;boot({options:t}){t({hover:!1,disableable:null,tabbable:!1,tabbableAttr:null})}mount(){let t=this.options().disableable;if(!t)throw"Focusable requires a Disableable instance...";this.el.hasAttribute("tabindex")||(this.options().tabbable?this.tabbable():this.untabbable()),this.pauseFocusListener=this.on("focus",t.enabled(()=>{this.focus(!1)})).pause,this.on("focus",t.enabled(()=>{Qt()&&c(this.el,"data-focus","")})),this.on("blur",t.enabled(()=>{A(this.el,"data-focus")})),this.options().hover&&this.on("pointerenter",t.enabled(()=>{this.group()?.untabbleOthers(this.el),this.tabbable()})),this.options().hover&&this.on("pointerleave",t.enabled(i=>{this.untabbable()}))}focus(t=!0){this.group()?.untabbleOthers(this.el),this.tabbable(),t&&this.pauseFocusListener(()=>{this.el.focus({focusVisible:!1})})}tabbable(){c(this.el,"tabindex","0"),this.options().tabbableAttr&&c(this.el,this.options().tabbableAttr,"")}untabbable(){c(this.el,"tabindex","-1"),this.options().tabbableAttr&&A(this.el,this.options().tabbableAttr)}isTabbable(){return this.el.getAttribute("tabindex")==="0"}};var fe=class extends D{boot(){c(this,"tabindex","-1"),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{this.hidePopover()}),c(this,"role","listbox")}},Zi=class extends D{mount(){this._disabled=this.hasAttribute("disabled");let t=this;this._disabled&&(c(t,"disabled",""),c(t,"aria-disabled","true"));let i=q(t,"option");if(c(t,"role","option"),this._filterable=new St(t,{mirror:this,keep:!!this.closest("ui-empty")||this.getAttribute("filter")==="manual"}),this._disabled)return;this._activatable=new H(t),this.hasAttribute("action")||(this._selectable=new L(t,{value:this.getValue(),label:this.getLabel(),selectedInitially:this.hasAttribute("selected")})),new MutationObserver(r=>{r.forEach(a=>{a.attributeName==="selected"&&(this.hasAttribute("selected")?this._selectable.setState(!0):this._selectable.setState(!1))})}).observe(this,{attributeFilter:["selected"]})}get selected(){return this._disabled||!this?._selectable?!1:this._selectable.isSelected()}set selected(t){if(!this._disabled){if(!this?._selectable)return!1;this._selectable.setState(t)}}getLabel(){return this.hasAttribute("label")?this.getAttribute("label"):this.textContent.trim()}getValue(){return this.hasAttribute("value")?this.getAttribute("value"):this.textContent.trim()}};P(({css:e})=>e`ui-options:not([popover]), ui-option { display: block; cursor: default; }`);C("options",fe);C("option",Zi);var ti=class extends D{boot(){if(this.querySelectorAll("[data-appended]").forEach(t=>t.remove()),!this.querySelector("template")){let t=document.createElement("template");t.setAttribute("name","placeholder"),t.innerHTML="<span>"+this.innerHTML+"</span>",this.innerHTML="",this.appendChild(t)}if(!this.querySelector('template[name="options"]')){let t=document.createElement("template");t.setAttribute("name","options"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}if(!this.querySelector('template[name="option"]')){let t=document.createElement("template");t.setAttribute("name","option"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),overflow:this.querySelector('template[name="overflow"]'),options:this.querySelector('template[name="options"]'),option:this.querySelector('template[name="option"]')},this.templates.options.elsByValue=new Map,this.max=this.templates.overflow?.getAttribute("max")?this.templates.overflow.getAttribute("max"):1/0,this.selecteds=new Map,this.picker=this.closest("ui-select"),this.multiple=this.picker.hasAttribute("multiple")}mount(){queueMicrotask(()=>{this.picker._selectable.onInitAndChange(()=>{this.render(!0)});let t=this.picker.list();t&&new MutationObserver(i=>{queueMicrotask(()=>this.render())}).observe(t,{childList:!0})})}render(t){if(this.multiple){let i=this.picker.value,s=Array.from(this.selecteds.keys()).filter(n=>!i.includes(n)),r=i.filter(n=>!this.selecteds.has(n));s.forEach(n=>this.selecteds.delete(n));let a=new Map;for(let n of r){let l=this.picker._selectable.findByValue(n);if(!l){if(t)return setTimeout(()=>this.render());throw`Could not find option for value "${n}"`}a.set(n,l)}a.forEach((n,l)=>this.selecteds.set(l,n)),this.templates.placeholder?.clearPlaceholder?.(),this.templates.overflow?.clearOverflow?.(),this.templates.options?.clearOptions?.(),this.selecteds.size>0?this.renderOptions({hasOverflowed:n=>{if(this.max==="auto"){let l=!1;if(this.renderOverflow(this.selecteds.size,this.selecteds.size-n),this.clientWidth<this.scrollWidth&&(l=!0),this.templates.overflow?.clearOverflow?.(),l)return!0}return n>parseInt(this.max)},renderOverflow:n=>{this.templates?.overflow?.getAttribute("mode")!=="append"&&this.templates.options?.clearOptions?.(),this.renderOverflow(this.selecteds.size,n)}}):this.renderPlaceholder()}else{let i=this.picker.value;if(Array.from(this.selecteds.keys()).includes(i))return;this.selecteds.clear();let s=this.picker._selectable.findByValue(i);if(s)this.selecteds.set(i,s);else if(!["",null,void 0].includes(i)){if(t)return setTimeout(()=>{console.log("retrying..."),this.render()});throw`Could not find option for value "${i}"`}this.templates.placeholder?.clearPlaceholder?.(),this.templates.option?.clearOption?.(),this.selecteds.size>0?this.renderOption():this.renderPlaceholder()}}renderOptions({hasOverflowed:t,renderOverflow:i}){let s=document.createElement("div");s.style.display="contents";let r=pe(this.templates.options,{default:s});this.templates.options.after(r),this.templates.options.clearOptions=()=>{r.remove(),this.templates.options.clearOptions=()=>{}};let a=0,n=!1;for(let[o,u]of this.selecteds){let d=new DocumentFragment;d.append(...u.el.cloneNode(!0).childNodes);let p=pe(this.templates.option,{text:u.el.textContent.trim(),default:d,value:o});if(p.setAttribute("data-value",o),p.setAttribute("data-appended",""),p.deselect=()=>u.deselect(),s.appendChild(p),a++,t(a)){n=!0,s.removeChild(p),a--;break}}let l=new DocumentFragment;l.append(...s.childNodes),s.replaceWith(l),n&&i(this.selecteds.size-a)}renderOption(){for(let[t,i]of this.selecteds){let s=new DocumentFragment;s.append(...i.el.cloneNode(!0).childNodes);let r=pe(this.templates.option,{text:i.el.textContent.trim(),default:s,value:t});r.setAttribute("data-value",t),r.setAttribute("data-appended",t),r.deselect=()=>i.deselect(),this.templates.option.after(r),this.templates.option.clearOption=()=>{r.remove(),this.templates.option.clearOption=()=>{}}}}renderPlaceholder(){if(!this.templates.placeholder)return;let t=pe(this.templates.placeholder);t.setAttribute("data-appended",""),this.templates.placeholder.after(t),this.templates.placeholder.clearPlaceholder=()=>{t.remove(),this.templates.placeholder.clearPlaceholder=()=>{}}}renderOverflow(t,i){if(!this.templates.overflow)return;let s=pe(this.templates.overflow,{remainder:i,count:this.selecteds.size});s.setAttribute("data-appended",""),this.templates.overflow.after(s),this.templates.overflow.clearOverflow=()=>{s.remove(),this.templates.placeholder.clearOverflow=()=>{}}}};function pe(e,t={}){let i=e.content.cloneNode(!0);return Object.entries(t).forEach(([s,r])=>{(s==="default"?i.querySelectorAll("slot:not([name])"):i.querySelectorAll(`slot[name="${s}"]`)).forEach(n=>n.replaceWith(typeof r=="string"?document.createTextNode(r):r))}),i.firstElementChild}var ge=class extends W{boot(){let t=this.list();this._controllable=new I(this),this._selectable=new Y(t,{multiple:this.hasAttribute("multiple")}),this._controllable.initial(s=>s&&this._selectable.setState(s)),this._controllable.getter(()=>this._selectable.getState());let i=O();this._controllable.setter(i(s=>{this._selectable.setState(s)})),this._selectable.onChange(i(()=>{this._controllable.dispatch(),this.dispatchEvent(new CustomEvent("select",{bubbles:!1}))}))}mount(){this._disableable=new R(this);let t=this.input(),i=this.button(),s=this.list(),r=this.hasAttribute("multiple"),a=this.hasAttribute("autocomplete"),n=this.hasAttribute("autocomplete")&&this.getAttribute("autocomplete").trim().split(" ").includes("strict"),l=this.querySelector("ui-options")||this,o=hn(l,"options");this._activatable=new he(l,{filter:"data-hidden"}),!t&&!i&&this._disableable.onInitAndChange(b=>{b?this.removeAttribute("tabindex"):this.setAttribute("tabindex","0")}),this.hasAttribute("filter")&&this.getAttribute("filter")!=="manual"&&(this._filterable=new de(s),this._filterable.onChange(()=>{this._activatable.clearActive(),this._filterable.hasResults()&&this._activatable.activateFirst()}),this.addEventListener("close",()=>{this._filterable&&this._filterable.filter("")}));let u=this.querySelector("[popover]:not(ui-tooltip > [popover])"),d=u?.querySelector("input"),p=this.querySelector("input");p=u?.contains(p)?null:p;let m=this.querySelector("button");if(m=u?.contains(m)?null:m,!(u||p))be(this,this._activatable),me(this,this,this._activatable),Mr(this,this._activatable,this._selectable);else if(!u&&p){let b=p;this._disableable.onInitAndChange(h=>{h?b&&c(b,"disabled",""):b&&A(b,"disabled")}),as(this,b,this._selectable,this._popoverable),Mr(b,this._activatable,this._selectable),Or(a,n,this,b,this._selectable,this._popoverable),rs(b),ss(b),this._filterable&&is(b,this._filterable),Lr(b,this._activatable),be(b,this._activatable),me(this,b,this._activatable),ei(this,this._activatable)}else if(u&&p){let b=p;c(b,"role","combobox"),c(b,"aria-controls",o);let h=u;this._popoverable=new et(h),this._anchorable=new z(h,{reference:b,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),Or(a,n,this,b,this._selectable,this._popoverable),this._disableable.onInitAndChange(k=>{k?b&&c(b,"disabled",""):b&&A(b,"disabled")}),this.querySelectorAll("button").forEach(k=>{h.contains(k)||(c(k,"tabindex","-1"),c(k,"aria-controls",o),c(k,"aria-haspopup","listbox"),ii(k,this._popoverable),x(k,"click",()=>{this._popoverable.toggle(),b.focus()}))}),as(this,b,this._selectable,this._popoverable),Qi(this,b,h,this._popoverable,this._anchorable),os(this,this._popoverable),ii(b,this._popoverable),rs(b),ss(b),this._filterable&&is(b,this._filterable),Lr(b,this._activatable),pn(b,this._popoverable),es(b,this._popoverable,this._activatable,this._selectable),dn(b,this._popoverable),be(b,this._activatable),me(this,b,this._activatable),ei(this,this._activatable),ts(this._popoverable,this._activatable,this._selectable),ns(this,this._selectable,this._popoverable,r)}else if(u&&d){let b=m,h=d,k=u;c(b,"role","combobox"),c(h,"role","combobox"),c(b,"aria-controls",o),this._disableable.onInitAndChange(v=>{v?(b&&c(b,"disabled",""),h&&c(h,"disabled","")):(b&&A(b,"disabled"),h&&A(h,"disabled"))}),this._popoverable=new et(k),this._anchorable=new z(k,{reference:b,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),rs(h),ss(h),this._filterable&&is(h,this._filterable),fn(h,this._popoverable),Qi(this,b,k,this._popoverable,this._anchorable),os(this,this._popoverable),ii(b,this._popoverable),as(this,h,this._selectable,this._popoverable),es(b,this._popoverable,this._activatable,this._selectable),Pr(b,this._popoverable),be(h,this._activatable),Tr(b,this._activatable,this._popoverable),me(this,h,this._activatable),ei(this,this._activatable),ts(this._popoverable,this._activatable,this._selectable),ns(this,this._selectable,this._popoverable,r)}else if(u){let b=m,h=u;c(b,"role","combobox"),c(b,"aria-controls",o),this._disableable.onInitAndChange(k=>{k?(b&&c(b,"disabled",""),t&&c(t,"disabled","")):(b&&A(b,"disabled"),t&&A(t,"disabled"))}),this._popoverable=new et(h),this._anchorable=new z(h,{reference:b,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),Qi(this,b,h,this._popoverable,this._anchorable),os(this,this._popoverable),ii(b,this._popoverable),es(b,this._popoverable,this._activatable,this._selectable),Pr(b,this._popoverable),be(b,this._activatable),Tr(b,this._activatable,this._popoverable),me(this,b,this._activatable),ei(this,this._activatable),ts(this._popoverable,this._activatable,this._selectable),ns(this,this._selectable,this._popoverable,r)}new MutationObserver(()=>{setTimeout(()=>{if(!this._popoverable||this._popoverable.getState()){let b=this._selectable.selecteds()[0]?.el;setTimeout(()=>{this._activatable.activateSelectedOrFirst(b)})}else this._activatable.clearActive()})}).observe(s,{childList:!0})}button(){return Array.from(this.querySelectorAll("button")).find(t=>t.nextElementSibling?.matches("[popover]"))||null}input(){return this.querySelector("input")}list(){return this.querySelector("ui-options")||this}clear(){this.input()&&(this.input().value="",this.input().dispatchEvent(new Event("input",{bubbles:!1})))}open(){this._popoverable.setState(!0)}close(){this._popoverable.setState(!1)}deselectLast(){!this.hasAttribute("multiple")&&this.value!==null&&(this.value=null,this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1}))),this.hasAttribute("multiple")&&this.value.length!==0&&(this.value=this.value.slice(0,-1),this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1})))}},ls=class extends D{boot(){c(this,"data-hidden","")}mount(){queueMicrotask(()=>{let t=this.closest("ui-autocomplete, ui-combobox, ui-select"),i=this.closest("ui-options");if(!i)return;let s=l=>l.hasAttribute("data-hidden"),r=()=>{let l;CSS.supports("selector(&)")?l=Array.from(i.querySelectorAll("& > ui-option")).filter(o=>!s(o)).length===0:l=Array.from(i.querySelectorAll(":scope > ui-option")).filter(o=>!s(o)).length===0,l?A(this,"data-hidden"):c(this,"data-hidden","")};r();let a=t._filterable;a&&a.onChange(r),new MutationObserver(l=>{setTimeout(()=>r())}).observe(i,{childList:!0})})}};C("selected",ti);C("select",ge);C("empty",ls);P(({css:e})=>e`ui-select { display: block; }`);P(({css:e})=>e`ui-selected-option { display: contents; }`);P(({css:e})=>e`ui-empty { display: block; cursor: default; }`);function be(e,t){x(e,"keydown",i=>{["ArrowDown","ArrowUp","Escape"].includes(i.key)&&(i.key==="ArrowDown"?(t.activateNext(),i.preventDefault(),i.stopPropagation()):i.key==="ArrowUp"&&(t.activatePrev(),i.preventDefault(),i.stopPropagation()))})}function Tr(e,t,i){Re(e,s=>{t.activateBySearch(s),i.getState()||t.getActive()?.click()})}function me(e,t,i){x(t,"keydown",s=>{if(s.key==="Enter"){let r=i.getActive();if(s.preventDefault(),s.stopPropagation(),!r)return;r.click(),e.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1}))}})}function ei(e,t,i=!1){x(e,i?"pointerdown":"click",s=>{if(s.target.closest("ui-option")){let r=s.target.closest("ui-option");if(r._disabled)return;r._selectable?.trigger(),e.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1})),s.preventDefault(),s.stopPropagation()}})}function Mr(e,t,i){x(e,"focus",()=>{let s=i.selecteds()[0]?.el;t.activateSelectedOrFirst(s)}),x(e,"blur",()=>{t.clearActive()})}function hn(e){let t=q(e,"options");return c(e,"role","listbox"),t}function ii(e,t){c(e,"aria-haspopup","listbox");let i=()=>{c(e,"aria-expanded",t.getState()?"true":"false"),t.getState()?c(e,"data-open",""):A(e,"data-open","")};t.onChange(()=>{i()}),i()}function Qi(e,t,i,s,r){let a=()=>{Array.from([e,i]).forEach(n=>{s.getState()?c(n,"data-open",""):A(n,"data-open","")}),s.getState()?r.reposition():r.cleanup()};s.onChange(()=>a()),a(),s.onChange(()=>{s.getState()?e.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):e.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function ts(e,t,i){e.onChange(()=>{if(e.getState()){let s=i.selecteds()[0]?.el;setTimeout(()=>{t.activateSelectedOrFirst(s)})}else t.clearActive()})}function es(e,t){x(e,"keydown",i=>{["ArrowDown","ArrowUp","Escape"].includes(i.key)&&(i.key==="ArrowDown"||i.key==="ArrowUp"?t.getState()||(t.setState(!0),i.preventDefault(),i.stopImmediatePropagation()):i.key==="Escape"&&t.getState()&&(t.setState(!1),i.preventDefault(),i.stopImmediatePropagation()))})}function dn(e,t){x(e,"click",()=>{t.getState()||(t.setState(!0),e.focus())})}function Pr(e,t){x(e,"click",()=>{t.setState(!t.getState()),e.focus()})}function fn(e,t){t.onChange(()=>{t.getState()&&setTimeout(()=>e.focus())})}function is(e,t){t&&x(e,"input",i=>{t.filter(i.target.value)})}function ss(e){x(e,"focus",()=>e.select())}function rs(e){x(e,"change",t=>t.stopPropagation()),x(e,"input",t=>t.stopPropagation())}function pn(e,t){x(e,"keydown",i=>{(/^[a-zA-Z0-9]$/.test(i.key)||i.key==="Backspace")&&(t.getState()||t.setState(!0))})}function as(e,t,i,s){if(!e.hasAttribute("clear"))return;let a=p=>{t.value=p,t.dispatchEvent(new Event("input",{bubbles:!1}))},n=e.getAttribute("clear"),l=n===""||n.split(" ").includes("action"),o=n===""||n.split(" ").includes("select"),u=n===""||n.split(" ").includes("close"),d=n===""||n.split(" ").includes("esc");n==="none"&&(l=o=u=d=!1),l?e.addEventListener("action",p=>{a("")}):o&&i.onChange(()=>{queueMicrotask(()=>a(""))}),u&&s.onChange(()=>{s.getState()||a("")}),d&&x(t,"keydown",p=>{p.key==="Escape"&&a("")})}function ns(e,t,i,s){let r=!s,a=!s;if(e.hasAttribute("close")){let n=e.getAttribute("close");r=n===""||n.split(" ").includes("action"),a=n.split(" ").includes("select"),n==="none"&&(r=a=!1)}r?e.addEventListener("action",n=>{i.setState(!1)}):a&&t.onChange(()=>{i.setState(!1)})}function Lr(e,t){t.onChange(()=>{let i=t.getActive();i?c(e,"aria-activedescendant",i.id):A(e,"aria-activedescendant")})}function Or(e,t,i,s,r,a){if(!e){c(s,"autocomplete","off"),c(s,"aria-autocomplete","none");return}let n=l=>{s.value=l,s.dispatchEvent(new Event("input",{bubbles:!1}))};c(s,"autocomplete","off"),c(s,"aria-autocomplete","list"),r.setState(s.value),queueMicrotask(()=>{r.onInitAndChange(()=>{s.value=r.selectedTextValue()})}),i.addEventListener("action",l=>{n(r.selectedTextValue())}),t&&a.onChange(()=>{a.getState()||n(r.selectedTextValue())})}function os(e,t){let{lock:i,unlock:s}=pt();t.onChange(()=>{t.getState()?i():s()})}var ve=class e extends D{boot(){if(this._focusable=new dt(this,{wrap:!1,ensureTabbable:!1}),x(this,"keydown",t=>{["ArrowDown"].includes(t.key)?(t.target===this?this._focusable.focusFirst():this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp"].includes(t.key)&&(t.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),Re(this,t=>this._focusable.focusBySearch(t)),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{setTimeout(()=>this.hidePopover(),50)}),this.parentElement.localName==="ui-dropdown"){let t=this.parentElement;x(t.trigger(),"keydown",i=>{i.key==="ArrowDown"&&(this.fromArrowDown=!0,this.showPopover(),i.preventDefault(),i.stopPropagation())})}c(this,"role","menu"),c(this,"tabindex","-1")}mount(){this.initializeMenuItems(),new MutationObserver(i=>{this.initializeMenuItems()}).observe(this,{childList:!0,subtree:!0})}onPopoverShow(){queueMicrotask(()=>{this.fromArrowDown?(this._focusable.focusFirst(),this.fromArrowDown=!1):this.focus()})}onPopoverHide(){this._focusable.wipeTabbables()}initializeMenuItems(){this.walker().each(t=>{t._disableable||bn(t)})}walker(){return B(this,(t,{skip:i,reject:s})=>{if(t instanceof e||t instanceof ge)return s();if(!["a","button"].includes(t.localName))return i()})}},us=class extends D{boot(){}},cs=class extends D{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new R(this);let t=this;if(this._disabled&&(c(t,"disabled",""),c(t,"aria-disabled","true")),q(t,"menu-checkbox"),c(t,"role","menuitemcheckbox"),this._disabled)return;t._focusable=new V(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new L(t,{toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),this._controllable=new I(this),this._controllable.initial(s=>s&&t._selectable.setState(s)),this._controllable.getter(()=>t._selectable.getState());let i=O();this._controllable.setter(i(s=>{this._selectable.setState(s)})),this._selectable.onChange(i(()=>{this._controllable.dispatch()})),x(t,"click",()=>{this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),ps(t)}},hs=class extends D{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new R(this);let t=this;this._disabled&&(c(t,"disabled",""),c(t,"aria-disabled","true")),q(t,"menu-radio"),c(t,"role","menuitemradio"),!this._disabled&&(t._focusable=new V(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new L(t,{toggleable:!1,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),x(t,"click",()=>{this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),ps(t))}},ds=class extends D{boot(){this._selectable=new Y(this),this._controllable=new I(this),c(this,"role","group"),this._controllable.initial(i=>i&&this._selectable.setState(i)),this._controllable.getter(()=>this._selectable.getState());let t=O();this._controllable.setter(t(i=>{this._selectable.setState(i)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()}))}},fs=class extends D{boot(){this._selectable=new Y(this,{multiple:!0}),this._controllable=new I(this),c(this,"role","group"),this._controllable.initial(i=>i&&this._selectable.setState(i)),this._controllable.getter(()=>this._selectable.getState());let t=O();this._controllable.setter(t(i=>{this._selectable.setState(i)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()}))}};P(({css:e})=>e`ui-menu[popover]:popover-open { display: block; }`);P(({css:e})=>e`ui-menu[popover].\:popover-open { display: block; }`);P(({css:e})=>e`ui-menu-checkbox, ui-menu-radio { cursor: default; display: contents; }`);C("menu",ve);C("submenu",us);C("menu-checkbox",cs);C("menu-radio",hs);C("menu-radio-group",ds);C("menu-checkbox-group",fs);function ps(e){x(e,"keydown",t=>{t.key==="Enter"&&(e.click(),t.preventDefault(),t.stopPropagation())}),x(e,"keydown",t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation())}),x(e,"keyup",t=>{t.key===" "&&(e.click(),t.preventDefault(),t.stopPropagation())})}function bn(e){e._disableable=new R(e),e._disabled=e.hasAttribute("disabled");let t=e.querySelector("a"),i=e,s=e.parentElement.matches("ui-submenu")&&e.parentElement.querySelector("ui-menu[popover]"),r=t||i;if(e._disabled&&(c(r,"disabled",""),c(r,"aria-disabled","true")),q(r,"menu-item"),c(r,"role","menuitem"),!e._disabled)if(r._focusable=new V(r,{disableable:e._disableable,hover:!0,tabbableAttr:"data-active"}),!s)e.hasAttribute("disabled")||x(e,"click",()=>{e.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0}))}),ps(i);else{s._popoverable=new et(s,{triggers:[i]}),s._anchorable=new z(s,{reference:i,position:s.hasAttribute("position")?s.getAttribute("position"):"right start",gap:s.hasAttribute("gap")?s.getAttribute("gap"):"-5",crossAxis:!0}),i.addEventListener("click",n=>{s._popoverable.setState(!0)});let{clear:a}=Vt(i,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!1});s._popoverable.onChange(()=>{s._popoverable.getState()||(a(),s._focusable.wipeTabbables()),s._popoverable.getState()?s._anchorable.reposition():s._anchorable.cleanup()}),x(i,"keydown",n=>{n.key==="Enter"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),x(i,"keydown",n=>{n.key==="ArrowRight"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),x(s,"keydown",n=>{n.key==="ArrowLeft"&&(s._popoverable.setState(!1),i.focus(),n.stopPropagation())})}}var bs=class e extends D{mount(){this._focusable=new dt(this,{wrap:!0}),this._disableable=new R(this);let t=[];this._disableable.onInitAndChange(i=>{i?(c(this,"aria-disabled","true"),this.walker().each(s=>{s.hasAttribute("disabled")||(c(s,"disabled","true"),c(s,"aria-disabled","true"),t.push(()=>{Fe(s,"disabled"),Fe(s,"aria-disabled")}))})):(Fe(this,"aria-disabled"),t.forEach(s=>s()),t=[])}),x(this,"keydown",i=>{["ArrowRight"].includes(i.key)?(i.target===this?this._focusable.focusFirst():this._focusable.focusNext(),i.preventDefault(),i.stopPropagation()):["ArrowLeft"].includes(i.key)&&(i.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),i.preventDefault(),i.stopPropagation())}),c(this,"role","toolbar"),this.initializeToolbarItems()}initializeToolbarItems(){this.walker().each(t=>{t._disableable||mn(t)})}walker(){return B(this,(t,{skip:i,reject:s})=>{if(t instanceof e||t.hasAttribute("popover")||t instanceof ve||t instanceof fe)return s();if(!["a","button"].includes(t.localName))return i()})}};C("toolbar",bs);function mn(e){e._disableable=new R(e),e._disabled=e.hasAttribute("disabled");let s=e.querySelector("a")||e;e._disabled&&(c(s,"disabled",""),c(s,"aria-disabled","true")),!e._disabled&&(s._focusable=new V(s,{disableable:e._disableable}))}var ms=class extends D{boot(){let t=this.hasAttribute("label")?"label":"description",i=this.button(),s=this.overlay();if(i){if(!s)return}else return console.warn("ui-tooltip: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),s._popoverable=new et(s,{scope:"tooltip"}),s._anchorable=new z(s,{reference:i,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),s._popoverable.onChange(()=>{s._popoverable.getState()?s._anchorable.reposition():s._anchorable.cleanup()}),this._disabled||Vt(i,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!0,useSafeArea:!1});let r=q(s,"tooltip"),a=this.hasAttribute("interactive"),n=this.hasAttribute("label")||i.textContent.trim()==="";a?(c(i,"aria-controls",r),c(i,"aria-expanded","false"),s._popoverable.onChange(()=>{s._popoverable.getState()?c(i,"aria-expanded","true"):c(i,"aria-expanded","false")})):(n?c(i,"aria-labelledby",r):c(i,"aria-describedby",r),c(s,"aria-hidden","true")),c(s,"role","tooltip")}button(){return this.firstElementChild}overlay(){return this.lastElementChild!==this.button()&&this.lastElementChild}};C("tooltip",ms);var gs=class extends W{boot(){let t=this;if(this._disableable=new R(this),this._selectable=new L(t,{toggleable:!0,dataAttr:"data-checked",ariaAttr:"aria-checked",value:this.hasAttribute("value")?this.getAttribute("value"):null,label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked")}),this.value=this._selectable.getValue(),this._detangled=O(),this._selectable.onChange(this._detangled(()=>{this.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})),this.dispatchEvent(new Event("change",{bubbles:!1,cancelable:!0}))})),c(t,"role","switch"),this.hasAttribute("name")){let i=this.getAttribute("name"),s=document.createElement("input");s.type="hidden",s.name=i,s.value=this._selectable.getState(),this.appendChild(s),this._selectable.onChange(()=>{s.value=this._selectable.getState()})}this._disableable.onInitAndChange(i=>{i?A(t,"tabindex","0"):c(t,"tabindex","0")}),x(t,"click",this._disableable.disabled(i=>{i.preventDefault(),i.stopPropagation()}),{capture:!0}),x(t,"click",this._disableable.enabled(i=>{this._selectable.press()})),x(t,"keydown",this._disableable.enabled(i=>{i.key==="Enter"&&(this._selectable.press(),i.preventDefault(),i.stopPropagation())})),x(t,"keydown",this._disableable.enabled(i=>{i.key===" "&&(i.preventDefault(),i.stopPropagation())})),x(t,"keyup",this._disableable.enabled(i=>{i.key===" "&&(this._selectable.press(),i.preventDefault(),i.stopPropagation())})),gn(t)}get checked(){return this._selectable.isSelected()}set checked(t){this._detangled(()=>{t?this._selectable.select():this._selectable.deselect()})()}};function gn(e){e.closest("label")?.addEventListener("click",t=>{e.contains(t.target)||e.click()})}P(({css:e})=>e`ui-switch { display: inline-block; user-select: none; }`);C("switch",gs);var vs=class e extends D{mount(){this.control=this.fieldWalker().find(t=>this.isControl(t)),this.control}associateLabelWithControl(t){t&&this.label&&(this.control=t,!this.control.hasAttribute("aria-labelledby")&&(c(this.elOrButton(this.control),"aria-labelledby",this.label.id),this.control&&!(this.control instanceof W)&&this.hasAttribute("disabled")&&this.control.setAttribute("disabled","")))}associateDescriptionWithControl(t){t&&this.description&&(this.control=t,!this.control.hasAttribute("aria-describedby")&&c(this.elOrButton(this.control),"aria-describedby",this.description.id))}associateLabel(t){this.label=t,x(t,"click",i=>{["a","button"].includes(i.target.localName)||this.focusOrTogggle(this.control)}),this.control&&this.associateLabelWithControl(this.control)}associateDescription(t){this.description=t,this.control&&this.associateDescriptionWithControl(this.control)}fieldWalker(){return B(this,(t,{skip:i,reject:s})=>{if(t instanceof e&&t!==this||t.parentElement.localName==="ui-editor"&&t!==this)return s()})}isControl(t){return!!(t instanceof W||t.matches("input, textarea, select"))}focusOrTogggle(t){if(!t||t.disabled||t.hasAttribute("disabled"))return;t.localName==="input"&&["checkbox","radio"].includes(t.type)||["ui-switch","ui-radio","ui-checkbox"].includes(t.localName)?(t.click(),t.focus()):t.localName==="input"&&["file"].includes(t.type)?t.click():["ui-select"].includes(t.localName)?t.trigger().focus():(["ui-editor"].includes(t.localName),t.focus())}elOrButton(t){return t instanceof D&&t.firstElementChild instanceof HTMLButtonElement?t.firstElementChild:t}},ys=class extends D{mount(){q(this,"label"),c(this,"aria-hidden","true"),this.closest("ui-field")?.associateLabel(this)}},ws=class extends D{mount(){q(this,"description"),c(this,"aria-hidden","true"),this.closest("ui-field")?.associateDescription(this)}};P(({css:e})=>e`
    ui-label { display: inline-block; cursor: default; user-select: none; }
    ui-description { display: block; }
`);C("field",vs);C("label",ys);C("description",ws);var si=class{constructor(){this.subscribers=[]}subscribe(t,i){this.subscribers.push({reason:t,callback:i})}notify(t,i){this.subscribers.forEach(({reason:s,callback:r})=>{t===s&&r(i)})}};function qr(e){let t={time:Sn,linear:yn,categorical:vn},i=Date.now(),s=Date.now(),r={},a=(l,o,u)=>{let d=`${l}-${o}`;for(let p in r)p.startsWith(`${l}-`)&&!p.endsWith(String(o))&&delete r[p];return r[d]||(r[d]=u()),r[d]},n={data:[],width:e.width,height:e.height,inset:e.inset,axes:{x:{axis:"x",key:e.axes.x.key,format:e.axes.x.format,inset:{start:0,end:0},position:e.axes.x.position||"bottom",tickStart:e.axes.x.tickStart,tickEnd:e.axes.x.tickEnd,tickCount:e.axes.x.tickCount,tickStep:e.axes.x.tickStep,tickValues:e.axes.x.tickValues,tickSuffix:e.axes.x.tickSuffix,tickPrefix:e.axes.x.tickPrefix,get rawValues(){return a("x.rawValues",i,()=>n.data.map(l=>l[this.key]))},get type(){return a("x.type",i,()=>e.axes.x.scale||(this.rawValues.every(l=>xn(l))?"time":"categorical"))},get values(){return a("x.values",i,()=>this.rawValues.map(l=>this.type==="time"?ai(l):this.type==="linear"?Number(l):l))},get ticks(){return a("x.ticks",i,()=>{let l=Ir(n.data,this,ri(this.type,this.values)),o=Nr(l,this.type,this.format,this.tickSuffix,this.tickPrefix);return l.map((u,d)=>({value:u,label:o[d]}))})},get domain(){return a("x.domain",i,()=>ri(this.type,[...this.ticks.map(l=>l.value),...this.values]))},get range(){return a("x.range",s,()=>[n.inset.left+this.inset.start,n.width-n.inset.right-this.inset.end])},get scale(){return a("x.scale",s+i,()=>t[this.type](this.domain,this.range,this.values))}},y:{axis:"y",keys:e.axes.y.keys,format:e.axes.y.format,inset:{start:0,end:0},position:e.axes.y.position||"left",tickStart:e.axes.y.tickStart,tickEnd:e.axes.y.tickEnd,tickCount:e.axes.y.tickCount,tickStep:e.axes.y.tickStep,tickValues:e.axes.y.tickValues,tickSuffix:e.axes.y.tickSuffix,tickPrefix:e.axes.y.tickPrefix,get values(){return a("y.values",i,()=>n.data.flatMap(l=>this.keys.reduce((o,u)=>(l[u]&&o.push(l[u]),o),[])))},get type(){return a("y.type",i,()=>e.axes.y.scale||"linear")},get ticks(){return a("y.ticks",i,()=>{let l=Ir(n.data,this,ri(this.type,this.values)),o=Nr(l,this.type,this.format,this.tickSuffix,this.tickPrefix);return l.map((u,d)=>({value:u,label:o[d]}))})},get domain(){return a("y.domain",i,()=>ri(this.type,[...this.ticks.map(l=>l.value),...this.values]))},get range(){return a("y.range",s,()=>[n.height-n.inset.bottom-this.inset.end,n.inset.top+this.inset.start])},get scale(){return a("y.scale",s+i,()=>t[this.type](this.domain,this.range,this.values))}}},get series(){return a("series",i+s,()=>this.axes.y.keys.reduce((l,o)=>{if(!n.data[0].hasOwnProperty(o))return console.warn(`ui-chart: series field "${o}" does not exist`),l;let u=n.data.map(p=>({x:n.axes.x.scale(p[n.axes.x.key]),y:n.axes.y.scale(p[o]),datum:p})),d={field:o,values:n.data.map(p=>p[o]),linePath(p="monotone"){let m=this.points.map(y=>[y.x,y.y]);return{monotone:Rr,none:Fr}[p](m)},areaPath(p="monotone"){return`${{monotone:Rr,none:Fr}[p](this.points.map(b=>[b.x,b.y]))} L${n.axes.x.scale(n.axes.x.domain[1])},${n.axes.y.scale(n.axes.y.domain[0])} L${n.axes.x.scale(n.axes.x.domain[0])},${n.axes.y.scale(n.axes.y.domain[0])} Z`},points:u};return l[o]=d,l},{}))},closestXPoint(l){return this.closestXPoints(l)[0]},closestXPoints(l){return a("closestXPoints",i+s+l,()=>{let o=[],u=1/0;return Object.values(this.series).forEach(d=>{let p=null;d.points.forEach(m=>{let y=Math.abs(m.x-l);y<u&&(u=y,p=m)}),p&&o.push(p)}),o})},updateDimensions(l,o){this.width=l.width,this.height=l.height,this.inset=o,s=Date.now()},updateData(l){let o=JSON.parse(JSON.stringify(l));o[0]&&typeof o[0]!="object"&&(o=o.map((u,d)=>({value:u}))),o.every(u=>u.index)||o.forEach((u,d)=>{u.index=d}),this.data=o,i=Date.now()}};return n.updateData(e.data),n}function ri(e,t){let i=[...new Set(t)];return e==="time"?An(i):e==="linear"?(i.sort((s,r)=>Number(s)-Number(r)),[Number(i[0]),Number(i[i.length-1])]):[i[0],i[i.length-1]]}function Ir(e,t,i){let s=[];if(t.type==="linear"){if(t.tickValues)return t.tickValues;let[r,a]=i,n=t.tickCount?Number(t.tickCount):5,l=t.tickStart===0||t.tickStart==="0"?0:t.tickStart||"auto",o=t.tickEnd===0||t.tickEnd==="0"?0:t.tickEnd||"auto";l==="auto"&&r>0&&a>0&&(r=0),o!=="auto"&&o!=="max"&&!isNaN(Number(o))&&(a=Number(o));let d=(a-r)/(n-1),p=Math.pow(10,Math.floor(Math.log10(d))),m=d/p,y;m<1.5?y=1:m<3?y=2:m<7?y=5:y=10,y*=p;let b;l==="auto"?b=Math.floor(r/y)*y:l==="min"?b=r:b=Number(l);let h=b;for(;h<=a+y*.1;)h>=r-y*.1&&s.push(h),h+=y;if(o==="max")Math.abs(s[s.length-1]-i[1])>y*.1&&s.push(i[1]);else if(o!=="auto"&&!isNaN(Number(o))){let k=Number(o),v=s.length;s=Array.from({length:v},(f,S)=>b+(k-b)*(S/(v-1)))}if(s.length>n*2){let k=Math.ceil(s.length/n);s=s.filter((v,f)=>f%k===0)}}else if(t.type==="time"){let[r,a]=Vr(i[0],i[1],t.tickCount);return a}else if(t.type==="categorical"&&(e.forEach(r=>{let a=r[t.key];s.push(a)}),t.tickCount&&s.length>t.tickCount)){let r=Math.ceil(s.length/t.tickCount);s=s.filter((a,n)=>n%r===0)}return s}function Nr(e,t,i,s,r){let a=[];return t==="time"?(i||([i]=Vr(e[0],e[e.length-1])),i={...i,timeZone:"UTC"},a=e.map(n=>new Date(n).toLocaleString(lt(),i))):t==="linear"?i?a=e.map(n=>n.toLocaleString(lt(),i)):a=e.map(n=>n.toLocaleString(lt())):a=e.map(n=>n+""),r&&(a=a.map(n=>r+n)),s&&(a=a.map(n=>n+s)),a}function vn(e,t,i){let s=[...new Set(i)],r=(t[1]-t[0])/(s.length-1),a=new Map(s.map((n,l)=>[n,t[0]+l*r]));return function(n){if(n!=null)return a.get(n)}}function yn(e,t){let i=e[1]-e[0],s=t[1]-t[0];return function(r){return t[0]+(r-e[0])*(s/i)}}function Rr(e){if(e.length<2)return"";let t=o=>o<0?-1:1,i=(o,u,d,p,m,y)=>{let b=d-o,h=m-d,k=(p-u)/(b||h<0&&-0),v=(y-p)/(h||b<0&&-0),f=(k*h+v*b)/(b+h);return(t(k)+t(v))*Math.min(Math.abs(k),Math.abs(v),.5*Math.abs(f))||0},s=(o,u,d,p,m)=>{let y=d-o;return y?(3*(p-u)/y-m)/2:m},r=`M${e[0][0]},${e[0][1]}`;if(e.length===2)return r+`L${e[1][0]},${e[1][1]}`;for(let o=0;o<e.length-2;o++){let u=e[o],d=e[o+1];if(u[0]===d[0]&&u[1]===d[1])continue;let p=e[o+2],m=i(u[0],u[1],d[0],d[1],p[0],p[1]),y=(d[0]-u[0])/3,b=u[0]+y,h=u[1]+y*(o===0?s(u[0],u[1],d[0],d[1],m):e[o-1]?i(e[o-1][0],e[o-1][1],u[0],u[1],d[0],d[1]):m),k=d[0]-y,v=d[1]-y*m;r+=`C${b},${h} ${k},${v} ${d[0]},${d[1]}`}let a=e.length,n=e[a-1],l=e[a-2];if(!(n[0]===l[0]&&n[1]===l[1])){let o=i(e[a-3][0],e[a-3][1],l[0],l[1],n[0],n[1]),u=(n[0]-l[0])/3,d=l[0]+u,p=l[1]+u*o,m=n[0]-u,y=n[1]-u*s(l[0],l[1],n[0],n[1],o);r+=`C${d},${p} ${m},${y} ${n[0]},${n[1]}`}return r}function wn(e,t=.05){if(!e||e.length<2)return"";let i=`M ${e[0][0]} ${e[0][1]}`;for(let s=1;s<e.length;s++){let r=e[s],a=e[s-1],n=e[s-2]||a,l=e[s+1]||r,o=a[0]+(l[0]-n[0])*t,u=a[1]+(l[1]-n[1])*t,d=r[0]-(l[0]-n[0])*t,p=r[1]-(l[1]-n[1])*t;i+=` C ${o} ${u}, ${d} ${p}, ${r[0]} ${r[1]}`}return i}function Fr(e){return wn(e,0)}function xn(e){return e instanceof Date||typeof e=="string"&&e.includes("-")&&!isNaN(Date.parse(e))}function An(e){return e.sort((t,i)=>typeof t=="string"?t.localeCompare(i):t-i),[ai(e[0]),ai(e[e.length-1])]}function Sn(e,t){let i=new Date(e[0]).getTime(),r=new Date(e[1]).getTime()-i,a=t[1]-t[0];return function(n){if(!n)return;let l=ai(n);if(isNaN(l.getTime()))return;let o=(l.getTime()-i)/r;return t[0]+o*a}}function Vr(e,t,i){let s=e,r=t,l=(r-s)/1e3/60,o=l/60,u=o/24,d=u/30,p=u/365,m,y,b;if(o<1){m={hour:"numeric",minute:"numeric",hour12:!0};let v=i?Math.max(1,Math.floor(l/(i-1))):1;y=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes()+v)),b=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours()))}else if(u<1){m={hour:"numeric",hour12:!0};let v=i?Math.max(1,Math.floor(o/(i-1))):1;y=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours()+v)),b=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),0))}else if(u<=7){m={weekday:"short",hour:"numeric",hour12:!0};let v=i?Math.max(1,Math.floor(o/(i-1))):6;y=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours()+v)),b=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),0))}else if(u<=30){m={month:"short",day:"numeric"};let v=i?Math.max(1,Math.floor(u/(i-1))):1;y=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()+v)),b=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()))}else if(d<=6){m={month:"short",day:"numeric"};let v=i?Math.max(1,Math.floor(u/(i-1))):7;y=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()+v)),b=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()))}else if(p<2){m={month:"short"};let v=i?Math.max(1,Math.floor(d/(i-1))):1;y=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth()+v,1)),b=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth()))}else{m={year:"numeric"};let v=i?Math.max(1,Math.floor(p/(i-1))):1;y=f=>new Date(Date.UTC(f.getUTCFullYear()+v,0,1)),b=new Date(Date.UTC(s.getUTCFullYear(),0,1))}let h=[s],k=s;for(;k<=r;)k=y(k),k<=r&&h.push(new Date(k.getTime()));return[m,h]}function ai(e){if(e instanceof Date)return e;let{year:t,month:i,day:s,hour:r,minute:a,second:n,millisecond:l}=_n(e);return new Date(Date.UTC(t,i-1,s,r,a,n,l))}function _n(e){let t=e.match(/^(\d{4})(?:-(\d{2}))?(?:-(\d{2}))?(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(Z)?)?$/);if(!t)throw new Error("Invalid date format");return{year:t[1]?parseInt(t[1],10):null,month:t[2]?parseInt(t[2],10):null,day:t[3]?parseInt(t[3],10):null,hour:t[4]?parseInt(t[4],10):null,minute:t[5]?parseInt(t[5],10):null,second:t[6]?parseInt(t[6],10):null,millisecond:t[7]?parseInt(t[7].padEnd(3,"0"),10):null,utc:!!t[8]}}var xs=class extends HTMLElement{constructor(){super();let t=this.querySelector('template[name="svg"]'),i=qe(t);t.after(i),this.init(t,i)}init(t,i){this._data=this.hasAttribute("value")?JSON.parse(this.getAttribute("value")):[],this._observable=new si,this._selectable={getState:()=>this._data,setState:v=>{this._data=v,this._observable.notify("data",this._data)}},this._controllable=new I(this),this._controllable.initial(v=>v&&this._selectable.setState(v)),this._controllable.getter(()=>this._selectable.getState()),this._controllable.setter(v=>{this._selectable.setState(v)});let s={svg:t,lines:{},areas:{},points:{},cursor:t.content.querySelector('template[name="cursor"]'),zeroLine:t.content.querySelector('template[name="zero-line"]'),axes:{x:{template:t.content.querySelector('template[name="axis"][axis="x"]'),axisLine:t.content.querySelector('template[name="axis"][axis="x"] template[name="axis-line"]'),gridLine:t.content.querySelector('template[name="axis"][axis="x"] template[name="grid-line"]'),tickMark:t.content.querySelector('template[name="axis"][axis="x"] template[name="tick-mark"]'),tickLabel:t.content.querySelector('template[name="axis"][axis="x"] template[name="tick-label"]')},y:{template:t.content.querySelector('template[name="axis"][axis="y"]'),axisLine:t.content.querySelector('template[name="axis"][axis="y"] template[name="axis-line"]'),gridLine:t.content.querySelector('template[name="axis"][axis="y"] template[name="grid-line"]'),tickMark:t.content.querySelector('template[name="axis"][axis="y"] template[name="tick-mark"]'),tickLabel:t.content.querySelector('template[name="axis"][axis="y"] template[name="tick-label"]')}},tooltip:this.querySelector('template[name="tooltip"]'),summary:this.querySelector('template[name="summary"]')};t.content.querySelectorAll('template[name="line"]').forEach(v=>{s.lines[v.getAttribute("field")]=v}),t.content.querySelectorAll('template[name="area"]').forEach(v=>{s.areas[v.getAttribute("field")]=v}),t.content.querySelectorAll('template[name="point"]').forEach(v=>{s.points[v.getAttribute("field")]=v});let r=()=>{},a=()=>{},n=()=>{},l=()=>{},o=null,u=null,d=null,p=null;u=document.createElementNS("http://www.w3.org/2000/svg","rect"),u.setAttribute("data-overlay",""),u.setAttribute("fill","none"),u.setAttribute("pointer-events","all"),u.addEventListener("mousemove",yi(function(v){r(v),a(v),n(v),l(v)},1)),u.addEventListener("mouseleave",()=>{r(null),a(null),n(null),l(null)}),i.appendChild(u),s.cursor&&(o=st(s.cursor),o.setAttribute("data-cursor",""),i.appendChild(o)),s.tooltip&&(d=qe(s.tooltip),s.tooltip.after(d)),s.summary&&(p=qe(s.summary),s.summary.after(p));let m={left:8,right:8,top:8,bottom:8};if(s.svg?.hasAttribute("gutter")){let v=s.svg?.getAttribute("gutter").split(" ").map(f=>f.replace("px","")).map(Number);v.length===1?(m.top=v[0],m.right=v[0],m.bottom=v[0],m.left=v[0]):v.length===2?(m.top=v[0],m.right=v[1],m.bottom=v[0],m.left=v[1]):v.length===3?(m.top=v[0],m.right=v[1],m.bottom=v[2],m.left=v[1]):v.length===4&&(m.top=v[0],m.right=v[1],m.bottom=v[2],m.left=v[3])}let[y,b]=kn(i),h=qr({data:this._data,width:i.parentElement.getBoundingClientRect().width,height:i.parentElement.getBoundingClientRect().height,inset:{left:0,right:0,top:0,bottom:0},axes:{x:{key:y,format:s.axes.x.template?.hasAttribute("format")?JSON.parse(s.axes.x.template?.getAttribute("format")):null,scale:s.axes.x.template?.getAttribute("scale"),position:s.axes.x.template?.getAttribute("position"),tickCount:s.axes.x.template?.getAttribute("tick-count")||s.axes.x.tickLabel?.getAttribute("target-tick-count"),tickStart:s.axes.x.template?.getAttribute("tick-start"),tickEnd:s.axes.x.template?.getAttribute("tick-end"),tickStep:s.axes.x.template?.getAttribute("tick-step")?Number(s.axes.x.template?.getAttribute("tick-step")):null,tickSuffix:s.axes.x.template?.getAttribute("tick-suffix"),tickPrefix:s.axes.x.template?.getAttribute("tick-prefix"),tickValues:s.axes.x.template?.hasAttribute("tick-values")?JSON.parse(s.axes.x.template?.getAttribute("tick-values")):null},y:{keys:b,format:s.axes.y.template?.hasAttribute("format")?JSON.parse(s.axes.y.template?.getAttribute("format")):null,scale:s.axes.y.template?.getAttribute("scale"),position:s.axes.y.template?.getAttribute("position"),tickCount:s.axes.y.template?.getAttribute("tick-count")||s.axes.y.tickLabel?.getAttribute("target-tick-count"),tickStart:s.axes.y.template?.getAttribute("tick-start"),tickEnd:s.axes.y.template?.getAttribute("tick-end"),tickStep:s.axes.y.template?.getAttribute("tick-step")?Number(s.axes.y.template?.getAttribute("tick-step")):null,tickSuffix:s.axes.y.template?.getAttribute("tick-suffix"),tickPrefix:s.axes.y.template?.getAttribute("tick-prefix"),tickValues:s.axes.y.template?.hasAttribute("tick-values")?JSON.parse(s.axes.y.template?.getAttribute("tick-values")):null}}}),k=(v=!0)=>{if(c(i,"viewBox",`0 0 ${h.width} ${h.height}`),h.data.length!==0){if(h.data.length===1){console.warn("ui-chart: chart only has one data point so it cannot be rendered.");return}if(h.data[0][h.axes.x.key]===void 0){console.warn(`ui-chart: axis field "${h.axes.x.key}" does not exist`);return}if(Object.entries(h.series).forEach(([f,S])=>{let w=i.querySelector(`[data-line][data-series="${f}"]`),_=s.lines[f];if(_){let E=_.getAttribute("curve")||"monotone";if(w)w.setAttribute("d",S.linePath(E));else{let T=st(_);T.setAttribute("data-line",""),T.setAttribute("data-series",f),T.setAttribute("d",S.linePath(E)),i.appendChild(T)}}}),Object.entries(h.series).forEach(([f,S])=>{let w=i.querySelector(`[data-area][data-series="${f}"]`),_=s.areas[f];if(_){let E=_.getAttribute("curve")||"monotone";if(w)w.setAttribute("d",S.areaPath(E));else{let T=st(_);T.setAttribute("data-area",""),T.setAttribute("data-series",f),T.setAttribute("d",S.areaPath(E)),i.appendChild(T)}}}),Object.entries(h.series).forEach(([f,S])=>{let w=i.querySelector(`[data-point-group][data-series="${f}"]`),_=s.points[f];_&&(i.querySelector(`[data-point-group][data-series="${f}"]`)?.remove(),w=document.createElementNS("http://www.w3.org/2000/svg","g"),w.setAttribute("data-point-group",""),w.setAttribute("data-series",f),S.points.forEach(E=>{let T=st(_);T.setAttribute("data-point",""),T.setAttribute("data-series",f),T.setAttribute("cx",E.x),T.setAttribute("cy",E.y),w.appendChild(T)}),i.appendChild(w))}),l=f=>{i.querySelectorAll("[data-point-group]").forEach(S=>{if(S.querySelectorAll("[data-point]").forEach(w=>w.removeAttribute("data-active")),f){let w=f.clientX-i.getBoundingClientRect().left,_=f.clientY-i.getBoundingClientRect().top;w>=h.inset.left&&w<=h.width-h.inset.right&&_>=h.inset.top&&_<=h.height-h.inset.bottom&&h.closestXPoints(w).forEach(T=>{S.querySelectorAll(`[data-point][cx="${T.x}"]`).forEach(N=>N.setAttribute("data-active",""))})}else S.querySelectorAll("[data-point]").forEach(w=>w.removeAttribute("data-active"))})},s.axes.x.template){if(s.axes.x.axisLine){i.querySelector('[data-axis-line][data-axis="x"]')?.remove();let f=st(s.axes.x.axisLine);f.setAttribute("data-axis-line",""),f.setAttribute("data-axis","x"),f.setAttribute("x1",h.axes.x.scale(h.axes.x.domain[0])),f.setAttribute("x2",h.axes.x.scale(h.axes.x.domain[1])),f.setAttribute("y1",h.axes.y.scale(h.axes.y.domain[h.axes.x.position==="bottom"?0:1])),f.setAttribute("y2",h.axes.y.scale(h.axes.y.domain[h.axes.x.position==="bottom"?0:1])),i.appendChild(f)}if(s.axes.x.gridLine){i.querySelector('[data-grid-line-group][data-axis="x"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-grid-line-group",""),f.setAttribute("data-axis","x"),h.axes.x.ticks.forEach(({value:S})=>{let w=st(s.axes.x.gridLine);w.setAttribute("data-grid-line",""),w.setAttribute("data-axis","x"),w.setAttribute("x1",h.axes.x.scale(S)),w.setAttribute("x2",h.axes.x.scale(S)),w.setAttribute("y1",h.inset.top),w.setAttribute("y2",h.height-h.inset.bottom),f.appendChild(w)}),i.appendChild(f)}if(s.axes.x.tickMark){i.querySelector('[data-tick-mark-group][data-axis="x"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-mark-group",""),f.setAttribute("data-axis","x"),h.axes.x.ticks.forEach(({value:S,label:w})=>{let _={x:h.axes.x.scale(S),y:h.axes.y.scale(h.axes.y.domain[h.axes.x.position==="bottom"?0:1])},E=st(s.axes.x.tickMark);E.setAttribute("data-tick-mark",""),E.setAttribute("data-axis","x"),E.setAttribute("transform",`translate(${_.x}, ${_.y})`),f.appendChild(E)}),i.appendChild(f)}if(s.axes.x.tickLabel){i.querySelector('[data-tick-label-group][data-axis="x"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-label-group",""),f.setAttribute("data-axis","x"),h.axes.x.ticks.forEach(({value:S,label:w})=>{let _={x:h.axes.x.scale(S),y:h.axes.y.scale(h.axes.y.domain[h.axes.x.position==="bottom"?0:1])},E=st(s.axes.x.tickLabel);E.querySelectorAll("slot").forEach(T=>T.replaceWith(document.createTextNode(w))),E.setAttribute("data-tick-label",""),E.setAttribute("data-axis","x"),E.setAttribute("transform",`translate(${_.x}, ${_.y})`),f.appendChild(E)}),i.appendChild(f),Br(f,h.axes.x)}}if(s.axes.y.template){if(s.axes.y.axisLine){i.querySelector('[data-axis-line][data-axis="y"]')?.remove();let f=st(s.axes.y.axisLine);f.setAttribute("data-axis-line",""),f.setAttribute("data-axis","y"),f.setAttribute("x1",h.axes.x.scale(h.axes.x.domain[h.axes.y.position==="left"?0:1])),f.setAttribute("x2",h.axes.x.scale(h.axes.x.domain[h.axes.y.position==="left"?0:1])),f.setAttribute("y1",h.axes.y.scale(h.axes.y.domain[0])),f.setAttribute("y2",h.axes.y.scale(h.axes.y.domain[1])),i.appendChild(f)}if(s.axes.y.gridLine){i.querySelector('[data-grid-line-group][data-axis="y"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-grid-line-group",""),f.setAttribute("data-axis","y"),h.axes.y.ticks.forEach(({value:S,label:w})=>{let _={x:h.axes.x.scale(h.axes.x.domain[0]),y:h.axes.y.scale(S)},E=st(s.axes.y.gridLine);E.setAttribute("data-grid-line",""),E.setAttribute("data-axis","y"),E.setAttribute("x1",h.inset.left),E.setAttribute("x2",h.width-h.inset.right),E.setAttribute("y1",_.y),E.setAttribute("y2",_.y),f.appendChild(E)}),i.appendChild(f)}if(s.axes.y.tickMark){i.querySelector('[data-tick-mark-group][data-axis="y"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-mark-group",""),f.setAttribute("data-axis","y"),h.axes.y.ticks.forEach(({value:S,label:w})=>{let _={x:h.axes.x.scale(h.axes.x.domain[h.axes.y.position==="left"?0:1]),y:h.axes.y.scale(S)},E=st(s.axes.y.tickMark);E.setAttribute("data-tick-mark",""),E.setAttribute("data-axis","y"),E.setAttribute("transform",`translate(${_.x}, ${_.y})`),f.appendChild(E)}),i.appendChild(f)}if(s.axes.y.tickLabel){i.querySelector('[data-tick-label-group][data-axis="y"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-label-group",""),f.setAttribute("data-axis","y"),h.axes.y.ticks.forEach(({value:S,label:w})=>{let _={x:h.axes.x.scale(h.axes.x.domain[h.axes.y.position==="left"?0:1]),y:h.axes.y.scale(S)},E=st(s.axes.y.tickLabel);E.querySelectorAll("slot").forEach(T=>T.replaceWith(document.createTextNode(w))),E.setAttribute("data-tick-label",""),E.setAttribute("data-axis","y"),E.setAttribute("transform",`translate(${_.x}, ${_.y})`),f.appendChild(E)}),i.appendChild(f),Br(f,h.axes.y)}if(s.zeroLine&&h.axes.y.domain[0]<0&&h.axes.y.domain[1]>0){i.querySelector('[data-zero-line][data-axis="y"]')?.remove();let f=st(s.zeroLine);f.setAttribute("data-zero-line",""),f.setAttribute("data-axis","y"),f.setAttribute("x1",h.axes.x.scale(h.axes.x.domain[0])),f.setAttribute("x2",h.axes.x.scale(h.axes.x.domain[1])),f.setAttribute("y1",h.axes.y.scale(0)),f.setAttribute("y2",h.axes.y.scale(0)),i.appendChild(f)}}if(u&&(u.setAttribute("width",h.width),u.setAttribute("height",h.height),u.setAttribute("x",0),u.setAttribute("y",0)),o&&(r=f=>{if(f){let S=f.clientX-i.getBoundingClientRect().left,w=f.clientY-i.getBoundingClientRect().top;if(S>=h.inset.left&&S<=h.width-h.inset.right&&w>=h.inset.top&&w<=h.height-h.inset.bottom){let _=h.closestXPoint(S);o.setAttribute("opacity","1"),o.setAttribute("x1",_.x),o.setAttribute("x2",_.x),o.setAttribute("y1",h.axes.y.scale(h.axes.y.domain[0])),o.setAttribute("y2",h.axes.y.scale(h.axes.y.domain[1]))}else o.setAttribute("opacity","0")}else o.setAttribute("opacity","0")}),d&&(a=f=>{if(f===null)A(d,"data-active");else{let S=f.clientX-i.getBoundingClientRect().left,w=f.clientY-i.getBoundingClientRect().top;if(S>=h.inset.left&&S<=h.width-h.inset.right&&w>=h.inset.top&&w<=h.height-h.inset.bottom){let _=h.closestXPoint(S);if(_){c(d,"data-active","");let E=d.getBoundingClientRect(),T=i.getBoundingClientRect(),N=T.width-(_.x+E.width+15),rt=T.height-(w+E.height+15),G=N<0?_.x-E.width-15:_.x+15,at=rt<0?w-E.height-15:w+15;d.style.transform=`translate(${G}px, ${at}px)`;let Z=s.tooltip.content.cloneNode(!0).firstElementChild;Z.querySelectorAll("slot").forEach(Q=>{let j=Q.getAttribute("field");if(j){let ft=Q.hasAttribute("format")?JSON.parse(Q.getAttribute("format")):{};ft={...ft,timeZone:"UTC"};let $=_.datum[j];Hr($)?$=Number($).toLocaleString(lt(),ft):Ur($)&&($=new Date($).toLocaleDateString(lt(),ft)),Q.textContent=$}}),d.innerHTML=Z.innerHTML}else A(d,"data-active")}else A(d,"data-active")}}),p&&(n=f=>{let S=null;if(f!==null){let w=f.clientX-i.getBoundingClientRect().left,_=f.clientY-i.getBoundingClientRect().top;w>=h.inset.left&&w<=h.width-h.inset.right&&_>=h.inset.top&&_<=h.height-h.inset.bottom&&(S=h.closestXPoint(w))}if(S=S||h.closestXPoint(h.axes.x.range[1]),S){let w=s.summary.content.cloneNode(!0).firstElementChild;w.querySelectorAll("slot").forEach(_=>{let E=_.getAttribute("field");if(E){let T=_.hasAttribute("format")?JSON.parse(_.getAttribute("format")):{};T={...T,timeZone:"UTC"};let N=_.hasAttribute("fallback")&&f===null?_.getAttribute("fallback"):S.datum[E];Hr(N)?N=Number(N).toLocaleString(lt(),T):Ur(N)&&(N=new Date(N).toLocaleString(lt(),T)),_.textContent=N}}),p.innerHTML=w.innerHTML}},n(null)),i.appendChild(u),i.querySelectorAll("[data-grid-line-group]").forEach(f=>u.before(f)),i.querySelectorAll("[data-axis-line]").forEach(f=>u.before(f)),i.querySelectorAll("[data-zero-line]").forEach(f=>u.before(f)),i.querySelectorAll("[data-area]").forEach(f=>u.before(f)),i.querySelectorAll("[data-line]").forEach(f=>u.before(f)),i.querySelectorAll("[data-cursor]").forEach(f=>u.before(f)),i.querySelectorAll("[data-point-group]").forEach(f=>u.before(f)),v){let f=Tn(i);h.updateDimensions({width:h.width,height:h.height},{left:m.left+f.left,right:m.right+f.right,top:m.top+f.top,bottom:m.bottom+f.bottom}),k(!1)}}};this._observable.subscribe("resize",()=>{h.updateDimensions({width:i.parentElement.getBoundingClientRect().width,height:i.parentElement.getBoundingClientRect().height},{left:0,right:0,top:0,bottom:0}),k()}),this._observable.subscribe("data",()=>{h.updateData(this._data),k()}),new ResizeObserver(()=>{this._observable.notify("resize")}).observe(this)}};customElements.define("ui-chart",xs);function kn(e){let t=null,i=[];return e.querySelectorAll('template[name="line"], template[name="area"], template[name="point"]').forEach(s=>{i.push(s.getAttribute("field")||"value")}),e.querySelectorAll('template[name="axis"][axis="x"]').forEach(s=>{t=s.getAttribute("field")||"index"}),i=Array.from(new Set(i)),t===null&&(t="index"),i.length===0&&(i=["value"]),[t,i]}function st(e){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("version","1.1"),t.innerHTML=e.innerHTML,t.firstElementChild}function Br(e,t){if(Wr(e,t)){if(t.axis==="x"&&t.type==="categorical")En(e);else if(t.axis==="x"&&t.type==="time"){let i=Cn(e);if(!Wr(e,t))return;i(),Dn(e)}}}function Wr(e,t){let i=Array.from(e.children);i=i.filter(s=>s.style.display!="none");for(let s=0;s<i.length;s++){let r=i[s],a=i[s+1];if(!a)break;let n=r.getBoundingClientRect(),l=a.getBoundingClientRect(),o=20;if(t.axis==="y"){if(n.bottom+o<l.top)return!0}else if(n.right+o>l.left)return!0}return!1}function En(e){let t=[];return Array.from(e.children).forEach((i,s)=>{let r=i.matches("text")?i:i.querySelector("text");Array.from(e.children).forEach((a,n)=>{let l=a.matches("text")?a:a.querySelector("text");l&&(l.style.transform="rotate(-45deg)",l.style.textAnchor="end",t.push(()=>{l.style.transform=null,l.style.textAnchor=null}))})}),()=>t.forEach(i=>i())}function Cn(e){let t=Array.from(e.children);return t.forEach((i,s)=>{s%2===1&&(i.style.display="none")}),()=>t.forEach((i,s)=>{i.style.display="inline"})}function Dn(e){let t=Array.from(e.children);t.forEach((n,l)=>{n.style.display="none"});let i=t[0],s=t[t.length-1],r=i.matches("text")?i:i.querySelector("text"),a=s.matches("text")?s:s.querySelector("text");return i.style.display="inline",r.style.textAnchor="start",s.style.display="inline",a.style.textAnchor="end",()=>t.forEach((n,l)=>{n.style.display="inline"})}function Hr(e){return typeof e=="number"||typeof e=="string"&&!isNaN(Number(e))}function Ur(e){return e instanceof Date||typeof e=="string"&&!isNaN(Date.parse(e))}function Tn(e){let t=e.getBoundingClientRect(),i={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return Array.from(e.children).forEach(s=>{if(s.hasAttribute("data-overlay")||s.style.display==="none")return;let r=s.getBoundingClientRect();!r.width&&!r.height||(i.top=Math.min(i.top,r.top),i.right=Math.max(i.right,r.right),i.bottom=Math.max(i.bottom,r.bottom),i.left=Math.min(i.left,r.left))}),{top:Math.max(0,t.top-i.top),right:Math.max(0,i.right-t.right),bottom:Math.max(0,i.bottom-t.bottom),left:Math.max(0,t.left-i.left)}}var As=class extends D{boot(){this._controllable=new I(this,{disabled:this.hasAttribute("disabled")});let t=this.button(),i=this.dialog();if(!i)return;i._dialogable=new jt(i,{clickOutside:!this.hasAttribute("disable-click-outside")}),this._controllable.initial(l=>l&&i._dialogable.show()),this._controllable.getter(()=>i._dialogable.getState());let s=O();this._controllable.setter(s(l=>{i._dialogable.setState(l)})),i._dialogable.onChange(s(()=>{this._controllable.dispatch()}));let r=()=>{i._dialogable.getState()?(c(this,"data-open",""),t?.setAttribute("data-open",""),c(i,"data-open","")):(A(this,"data-open"),t?.removeAttribute("data-open"),A(i,"data-open"))};i._dialogable.onChange(()=>r()),r();let{lock:a,unlock:n}=pt();i._dialogable.onChange(()=>{i._dialogable.getState()?a():n()}),t&&x(t,"click",l=>{i._dialogable.show()})}button(){let t=this.querySelector("button");if(!this.dialog()?.contains(t))return t}dialog(){return this.querySelector("dialog")}showModal(){let t=this.dialog();t&&t.showModal()}},Ss=class extends D{mount(){let t=this.querySelector("button");x(t,"click",()=>{Ie(this,s=>!!s._dialogable)?._dialogable?.hide()})}};P(({css:e})=>e`dialog, ::backdrop { margin: auto; }`);C("modal",As);C("close",Ss);var _s=class extends D{mount(){c(this,"role","status"),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.hideToast()})}showToast(t={}){let i=this.template().nextElementSibling;i&&i.destroyToast();let s=Number(t.duration===void 0?5e3:t.duration),r=t.slots||{},a=t.dataset||{},n=this.querySelector("template");if(!n)return console.warn("ui-toast: no template element found",this);let l=n.content.cloneNode(!0).firstElementChild;l.setAttribute("aria-atomic","true"),Object.entries(r).forEach(([p,m])=>{[null,void 0,!1].includes(m)||l.querySelectorAll(`slot[name="${p}"]`).forEach(y=>{y.replaceWith(document.createTextNode(m))})}),Object.entries(a).forEach(([p,m])=>{l.dataset[p]=m}),l.querySelectorAll("slot").forEach(p=>p.remove());let o=()=>{l.showPopover()},u=()=>{l._hiding=!0,l.hidePopover(),l.getAnimations().length?l.addEventListener("transitionend",()=>{l.remove()},{once:!0}):l.remove()};this.appendChild(l),o(),l.hideToast=u;let d=s!==0&&setTimeout(()=>{u()},s);l.destroyToast=()=>{d&&clearTimeout(d),l.remove()}}hideToast(){let t=this.template().nextElementSibling;t&&t.destroyToast()}template(){return this.querySelector("template")}};C("toast",_s);var ks=class extends W{boot(){this._selectable=new Y(this),this._controllable=new I(this,{disabled:this._disabled}),this._focusable=new dt(this,{wrap:!0}),this._controllable.initial(t=>t&&this._selectable.setState(t)),this._controllable.getter(()=>this._selectable.getState()),this._detangled=O(),this._controllable.setter(this._detangled(t=>{this._selectable.setState(t)})),this._selectable.onChange(this._detangled(()=>{this._controllable.dispatch()})),x(this,"keydown",t=>{["ArrowDown","ArrowRight"].includes(t.key)?(this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp","ArrowLeft"].includes(t.key)&&(this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),c(this,"role","radiogroup")}},Es=class extends W{boot(){let t=this;this._disableable=new R(this),this._selectable=new L(t,{value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked"),dataAttr:"data-checked",ariaAttr:"aria-checked"}),this.value=this._selectable.getValue(),this._selectable.onChange(()=>{this._selectable.isSelected()&&this._focusable.focus(!1)}),this._disableable.onChange(i=>{i?this._focusable.untabbable():this._selectable.isSelected()&&this._focusable.tabbable()}),c(t,"role","radio"),this._focusable=new V(t,{disableable:this._disableable,tabbableAttr:"data-active"}),x(t,"click",this._disableable.disabled(i=>{i.preventDefault(),i.stopPropagation()}),{capture:!0}),x(t,"click",this._disableable.enabled(i=>{this._selectable.press()})),x(t,"keydown",this._disableable.enabled(i=>{i.key==="Enter"&&(this._selectable.press(),i.preventDefault(),i.stopPropagation())})),x(t,"keydown",this._disableable.enabled(i=>{i.key===" "&&(i.preventDefault(),i.stopPropagation())})),x(t,"keyup",this._disableable.enabled(i=>{i.key===" "&&(this._selectable.press(),i.preventDefault(),i.stopPropagation())})),Mn(t),x(t,"focus",i=>{Qt()&&this._selectable.select()})}get checked(){return this._selectable.isSelected()}set checked(t){(this.closest("ui-radio-group")?._detangled||(()=>{}))(()=>{t&&this._selectable.select()})()}};function Mn(e){e.closest("label")?.addEventListener("click",t=>{e.contains(t.target)||e.click()})}P(({css:e})=>e`ui-radio-group { display: block; }`);P(({css:e})=>e`ui-radio { display: inline-block; user-select: none; }`);C("radio-group",ks);C("radio",Es);var ni=class e extends D{boot(){this._disabled=this.hasAttribute("disabled")}mount(){this.walkPanels(t=>$r(t)),new MutationObserver(t=>{this.walkPanels(i=>$r(i))}).observe(this,{childList:!0})}showPanel(t){this.walkPanels(i=>{i.getAttribute("name")===t?i.show():i.hide()})}getPanel(t){return this.walkPanels((i,s)=>{i.getAttribute("name")===t&&s(i)})}walkPanels(t){let i=!1,s;for(let r of this.children)if(!(r instanceof e)&&!(r instanceof oi)&&(t(r,a=>{i=!0,s=a}),i))break;return s}},oi=class e extends W{boot(){this._focusable=new dt(this,{wrap:!0}),this._selectableGroup=new Y(this),this._controllable=new I(this,{disabled:this._disabled}),this._controllable.initial(i=>i&&this._selectableGroup.setState(i)),this._controllable.getter(()=>this._selectableGroup.getState());let t=O();this._controllable.setter(t(i=>{this._selectableGroup.setState(i)})),this._selectableGroup.onChange(t(()=>{this._controllable.dispatch()})),x(this,"keydown",i=>{["ArrowDown","ArrowRight"].includes(i.key)?(this._focusable.focusNext(),i.preventDefault(),i.stopPropagation()):["ArrowUp","ArrowLeft"].includes(i.key)&&(this._focusable.focusPrev(),i.preventDefault(),i.stopPropagation())}),c(this,"role","tablist")}mount(){this.initializeTabs(),this._focusable.ensureTabbable(),this._selectableGroup.getState()||this._selectableGroup.selectFirst(),new MutationObserver(t=>{this.initializeTabs();let i=this._selectableGroup.selected();i.el.closest("ui-tab-group").showPanel(i.value)}).observe(this,{childList:!0})}initializeTabs(){this.walker().each(t=>{t._initialized||t._disableable||t.hasAttribute("action")||(Pn(t),t._initialized=!0)})}walker(){return B(this,(t,{skip:i,reject:s})=>{if(t instanceof ni||t instanceof e)return s();if(!["a","button"].includes(t.localName))return i()})}};function Pn(e){e._disableable=new R(e),e._disabled=e.hasAttribute("disabled");let t=e.matches("a")?e:null,i=t||e;e._disabled&&(c(i,"disabled",""),c(i,"aria-disabled","true"));let s=q(i,"tab");if(c(i,"role","tab"),!e._disabled&&(i._focusable=new V(i,{disableable:e._disableable,tabbableAttr:"data-active"}),!t)){let r=e.getAttribute("name");e._selectable=new L(e,{value:r||Math.random().toString(36).substring(2,10),label:e.hasAttribute("label")?e.getAttribute("label"):e.textContent.trim(),selectedInitially:e.hasAttribute("selected"),toggleable:!1}),x(e,"click",()=>e._selectable.press()),e._selectable.onChange(()=>{let a=e.closest("ui-tab-group")?.getPanel(r);e._selectable.getState()?a?.show():a?.hide(),e._selectable.getState()&&e._focusable.focus(!1)}),e.closest("ui-tab-group")?.hasAttribute("manual")||x(e,"focus",()=>e._selectable.select()),queueMicrotask(()=>{let a=e.closest("ui-tab-group");if(!a)return;let n=a.getPanel(r);if(!n)throw new Error("Could not find panel...");c(e,"aria-controls",n.id),c(n,"aria-labelledby",e.id)})}}function $r(e){e._initialized||(q(e,"tab-panel"),c(e,"role","tabpanel"),e.hasAttribute("tabindex")||c(e,"tabindex","-1"),e.show=()=>{c(e,"data-selected",""),c(e,"tabindex","0")},e.hide=()=>{A(e,"data-selected"),c(e,"tabindex","-1")},e._initialized=!0)}P(({css:e})=>e`ui-tab-group, ui-tabs { display: block; cursor: default; }`);C("tab-group",ni);C("tabs",oi);document.addEventListener("alpine:init",()=>{let e=window.Flux?.applyAppearance;e||(e=()=>{window.Flux.appearance=null,window.localStorage.removeItem("flux.appearance")});let t=Alpine.reactive({toast(...s){let r={slots:{},dataset:{}};typeof s[0]=="string"&&(r.slots.text=s.shift()),typeof s[0]=="string"&&(r.slots.heading=r.slots.text,r.slots.text=s.shift());let a=s.shift()||{};a.text&&(r.slots.text=a.text),a.heading&&(r.slots.heading=a.heading),a.variant&&(r.dataset.variant=a.variant),a.position&&(r.dataset.position=a.position),a.duration!==void 0&&(r.duration=a.duration),document.dispatchEvent(new CustomEvent("toast-show",{detail:r}))},modal(s){return{show(){document.dispatchEvent(new CustomEvent("modal-show",{detail:{name:s}}))},close(){document.dispatchEvent(new CustomEvent("modal-close",{detail:{name:s}}))}}},modals(){return{close(){document.dispatchEvent(new CustomEvent("modal-close",{detail:{}}))}}},appearance:window.localStorage.getItem("flux.appearance")||"system",systemAppearanceChanged:1,get dark(){return JSON.stringify(t.systemAppearanceChanged),t.appearance==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches:t.appearance==="dark"},set dark(s){let r=this.dark;s!==r&&(s?t.appearance="dark":t.appearance="light")}});window.Flux=t,Alpine.magic("flux",()=>t),Alpine.effect(()=>{e(t.appearance)}),document.addEventListener("livewire:navigated",()=>{e(t.appearance)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{t.systemAppearanceChanged++,e(t.appearance)})});!Us()&&!$s()&&Ys();})();
